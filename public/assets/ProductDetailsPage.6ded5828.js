import{_ as $,g as H,j as T,u as q,r as h,A as J,l as K,o as s,h as u,w as o,ac as W,f as n,c as d,t as r,m as i,Q as m,a as t,i as k,O as p,F as X}from"./index.c533f99f.js";import{Q as Z}from"./QAvatar.55704798.js";import{Q as f}from"./QChip.7995d9ec.js";import{d as ee}from"./date.28e87b3d.js";import{D as te,_ as ae}from"./DetailPageHeader.ee3cbe4d.js";import{I as se}from"./ImageCarousel.4407a616.js";import"./format.8ac60962.js";import"./QSkeleton.93e60c06.js";import"./QImg.d6c62732.js";import"./QCarousel.b90f6f4b.js";import"./use-panel.beb5b828.js";import"./touch.9135741d.js";import"./selection.4b85802c.js";import"./use-render-cache.3aae9b27.js";const oe={key:0},le={key:0,class:"flex items-center gap-3"},re=["src"],ie={class:"flex items-center gap-2"},ne={class:"text-lg font-medium m-0 text-primary"},ce={class:"text-gray-500 text-sm m-0"},ue={class:"flex items-start justify-between"},de={class:"flex flex-col items-center gap-2"},me={class:"text-lg font-semibold text-primary"},pe={class:"flex gap-4"},ve={key:0,class:"flex flex-wrap gap-2"},_e={key:1},fe={class:"text-gray-700 whitespace-pre-line"},ye={class:"bg-gray-50 rounded-lg p-4"},ge={class:"space-y-4"},xe={class:"flex justify-between"},he={class:"font-medium"},ke={class:"flex justify-between"},be={class:"font-medium"},we={key:2,class:"flex items-center justify-between gap-2 p-4 pr-2 bg-green-50 rounded-lg"},Pe={class:"flex items-center gap-2"},De="https://placehold.co/600x400/eeeeee/999999?text=No+Image",Ce={__name:"ProductDetailsPage",setup(Me){const N=W(),y=H(),S=T(),Y=q(),e=h(null),_=h(!0),g=h(null),V=l=>l?ee.formatDate(l,"MMM D, YYYY"):"",F=()=>{console.log("Show options menu")},G=l=>{console.log("Open gallery at index:",l)},b=()=>{y.push({name:"product-offer",params:{id:e.value.id}})},w=async()=>{_.value=!0,g.value=null;try{const l=await S.fetchProductById(N.params.id);e.value=l}catch(l){g.value="Failed to load product details",console.error("Error fetching product:",l)}finally{_.value=!1}},x=J(()=>{var l,a,c;return((a=(l=e.value)==null?void 0:l.user)==null?void 0:a.id)===((c=Y.currentUser)==null?void 0:c.id)}),L=()=>{y.push({name:"edit-product",params:{id:e.value.id}})},U=()=>{y.push({name:"delete-product",params:{id:e.value.id}})};return K(()=>{w()}),(l,a)=>(s(),u(te,{loading:_.value,error:g.value},{header:o(()=>[n(ae,{loading:_.value},{title:o(()=>[e.value?(s(),d("span",oe,r(e.value.title),1)):i("",!0)]),action:o(()=>[n(m,{flat:"",round:"",dense:"","no-caps":"",color:"primary",icon:"more_vert",onClick:F})]),_:1},8,["loading"])]),"error-action":o(()=>[n(m,{color:"primary",label:"Retry",onClick:w,"no-caps":""})]),images:o(()=>{var c,v;return[(v=(c=e.value)==null?void 0:c.media)!=null&&v.length?(s(),u(se,{key:0,images:e.value.media,onClickImage:G},null,8,["images"])):(s(),d("img",{key:1,src:De,class:"w-full h-full object-cover"}))]}),"user-info":o(()=>[e.value?(s(),d("div",le,[n(Z,{size:"50px"},{default:o(()=>[t("img",{src:e.value.user.profile_picture||"https://placehold.co/100x100/eeeeee/999999?text=User"},null,8,re)]),_:1}),t("div",null,[t("div",ie,[t("h3",ne,r(e.value.user.name),1),e.value.user.verified?(s(),u(k,{key:0,name:"verified",color:"primary",size:"20px"})):i("",!0)]),t("p",ce,"Member since "+r(V(e.value.user.created_at)),1)])])):i("",!0)]),details:o(()=>{var c,v,P,D,C,M,I,R,E,Q,j,z;return[t("div",ue,[a[1]||(a[1]=t("div",{class:"text-lg font-semibold"},"Price",-1)),t("div",de,[t("div",me,"$"+r((c=e.value)==null?void 0:c.price)+"/day",1),x.value?i("",!0):(s(),u(m,{key:0,color:"secondary","no-caps":"",class:"text-sm",onClick:b},{default:o(()=>a[0]||(a[0]=[p(" Rent now ")])),_:1}))])]),t("div",pe,[x.value?(s(),d(X,{key:0},[n(m,{outline:"",color:"primary","no-caps":"",class:"flex-1",icon:"edit",label:"Edit Product",onClick:L}),n(m,{outline:"",color:"negative","no-caps":"",class:"flex-1",icon:"delete",label:"Delete Product",onClick:U})],64)):i("",!0)]),((v=e.value)==null?void 0:v.brand)||((P=e.value)==null?void 0:P.size)||((D=e.value)==null?void 0:D.category)?(s(),d("div",ve,[(C=e.value.brand)!=null&&C.name?(s(),u(f,{key:0,outline:""},{default:o(()=>[p(r(e.value.brand.name),1)]),_:1})):i("",!0),(M=e.value.size)!=null&&M.display_name?(s(),u(f,{key:1,outline:""},{default:o(()=>[p(r(e.value.size.display_name),1)]),_:1})):i("",!0),(I=e.value.category)!=null&&I.name?(s(),u(f,{key:2,outline:""},{default:o(()=>[p(r(e.value.category.name),1)]),_:1})):i("",!0),((R=e.value.location)==null?void 0:R.city)&&((E=e.value.location)==null?void 0:E.province)?(s(),u(f,{key:3,outline:""},{default:o(()=>{var B,O,A;return[n(k,{name:"location_on"}),p(" "+r((B=e.value.location)==null?void 0:B.city)+", "+r((A=(O=e.value.location)==null?void 0:O.province)==null?void 0:A.name),1)]}),_:1})):i("",!0)])):i("",!0),(Q=e.value)!=null&&Q.description?(s(),d("div",_e,[a[2]||(a[2]=t("h2",{class:"text-lg font-semibold mb-2"},"Description",-1)),t("p",fe,r(e.value.description),1)])):i("",!0),t("div",ye,[a[5]||(a[5]=t("h2",{class:"text-lg font-semibold mb-4"},"Availability",-1)),t("div",ge,[t("div",xe,[a[3]||(a[3]=t("span",{class:"text-gray-600"},"Minimum Rental",-1)),t("span",he,r(((j=e.value)==null?void 0:j.min_rental_days)||1)+" days",1)]),t("div",ke,[a[4]||(a[4]=t("span",{class:"text-gray-600"},"Maximum Rental",-1)),t("span",be,r(((z=e.value)==null?void 0:z.max_rental_days)||30)+" days",1)])])]),x.value?i("",!0):(s(),d("div",we,[t("div",Pe,[n(k,{name:"security",color:"primary",size:"24px"}),a[6]||(a[6]=t("div",null,[t("h3",{class:"text-lg font-semibold m-0"},"Protection Guarantee"),t("p",{class:"text-sm text-gray-600 m-0"},"Your rental is protected")],-1))]),n(m,{color:"secondary",class:"text-sm",onClick:b,"no-caps":""},{default:o(()=>a[7]||(a[7]=[p(" Rent now ")])),_:1})]))]}),_:1},8,["loading","error"]))}};var Ge=$(Ce,[["__scopeId","data-v-523a633c"]]);export{Ge as default};
