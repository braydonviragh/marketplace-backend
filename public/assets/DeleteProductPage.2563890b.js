import{g as B,j as R,r as u,l as A,o as j,c as I,f as s,w as a,v as N,F as U,ac as E,a as e,Q as i,i as L,t as d,p as q,q as S,s as z,C as M}from"./index.c533f99f.js";import{Q as O}from"./QCardActions.d8fc215a.js";import{u as G}from"./use-quasar.22bfa1f7.js";import{D as H,_ as J}from"./DetailPageHeader.ee3cbe4d.js";import{_ as K}from"./SuccessDialog.84568d33.js";import"./QSkeleton.93e60c06.js";const W={class:"space-y-6"},X={class:"bg-red-50 border border-red-200 rounded-lg p-4"},Y={class:"flex items-center justify-between"},Z={class:"flex items-center gap-2"},ee={class:"bg-white rounded-lg shadow-sm overflow-hidden"},te={class:"aspect-video relative"},se=["src"],oe={class:"p-4"},le={class:"text-lg font-semibold"},ae={class:"text-primary font-medium"},re={class:"bg-white rounded-lg p-4 shadow-sm space-y-4"},ne={class:"grid grid-cols-2 gap-4"},ie={class:"bg-gray-50 p-4 rounded-lg"},de={class:"text-2xl font-semibold"},ue={class:"bg-gray-50 p-4 rounded-lg"},ce={class:"text-2xl font-semibold"},me={class:"bg-gray-50 p-4 rounded-lg"},pe={class:"text-2xl font-semibold"},ge={class:"bg-gray-50 p-4 rounded-lg"},fe={class:"text-2xl font-semibold"},ve={class:"flex gap-4"},Pe={__name:"DeleteProductPage",setup(_e){const F=E(),T=B();G();const g=R(),l=u(null),r=u(!0),m=u(null),c=u(!1),p=u(!1),f=o=>o?(typeof o=="string"?parseFloat(o):o).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",v=async()=>{r.value=!0,m.value=null;try{const o=await g.fetchProductById(F.params.id);l.value=o}catch(o){m.value="Failed to load product details",console.error("Error fetching product:",o)}finally{r.value=!1}},_=()=>{c.value=!0},$=async()=>{try{r.value=!0,await g.deleteProduct(l.value.id),c.value=!1,p.value=!0,setTimeout(()=>{T.push({name:"products"})},1e3)}catch(o){console.error(o)}finally{r.value=!1}};return A(()=>{v()}),(o,t)=>(j(),I(U,null,[s(H,{loading:r.value,error:m.value},{header:a(()=>[s(J,{loading:r.value},{title:a(()=>t[3]||(t[3]=[e("span",null,"Delete Product",-1)])),_:1},8,["loading"])]),"error-action":a(()=>[s(i,{color:"primary",label:"Retry",onClick:v})]),details:a(()=>{var n,x,y,b,h,w,D,C,P,Q,V,k;return[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[s(L,{name:"warning",color:"negative",size:"24px"}),t[4]||(t[4]=e("div",null,[e("h3",{class:"text-lg font-semibold m-0 text-red-700"},"Are you sure you want to delete this product?"),e("p",{class:"text-sm text-red-600 m-0"},"This action cannot be undone.")],-1))]),s(i,{color:"negative",label:"Delete Product",onClick:_})])]),e("div",ee,[e("div",te,[e("img",{src:((x=(n=l.value)==null?void 0:n.media[0])==null?void 0:x.url)||"https://placehold.co/600x400",class:"w-full h-full object-cover",alt:"Product Image"},null,8,se)]),e("div",oe,[e("h2",le,d((y=l.value)==null?void 0:y.title),1),e("p",ae,"$"+d(f((b=l.value)==null?void 0:b.price))+"/day",1)])]),e("div",re,[t[9]||(t[9]=e("h3",{class:"text-lg font-semibold"},"Product Statistics",-1)),e("div",ne,[e("div",ie,[t[5]||(t[5]=e("p",{class:"text-gray-600 text-sm"},"Total Rentals",-1)),e("p",de,d(((w=(h=l.value)==null?void 0:h.stats)==null?void 0:w.total_rentals)||0),1)]),e("div",ue,[t[6]||(t[6]=e("p",{class:"text-gray-600 text-sm"},"Total Revenue",-1)),e("p",ce,"$"+d(f(((C=(D=l.value)==null?void 0:D.stats)==null?void 0:C.total_revenue)||0)),1)]),e("div",me,[t[7]||(t[7]=e("p",{class:"text-gray-600 text-sm"},"Active Offers",-1)),e("p",pe,d(((Q=(P=l.value)==null?void 0:P.stats)==null?void 0:Q.active_offers)||0),1)]),e("div",ge,[t[8]||(t[8]=e("p",{class:"text-gray-600 text-sm"},"Total Views",-1)),e("p",fe,d(((k=(V=l.value)==null?void 0:V.stats)==null?void 0:k.total_views)||0),1)])])]),e("div",ve,[s(i,{outline:"",color:"primary",class:"flex-1",label:"Cancel",onClick:t[0]||(t[0]=xe=>o.$router.back())}),s(i,{color:"negative",class:"flex-1",label:"Delete Product",onClick:_})])])]}),_:1},8,["loading","error"]),s(N,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=n=>c.value=n),persistent:""},{default:a(()=>[s(q,null,{default:a(()=>[s(S,{class:"row items-center"},{default:a(()=>t[10]||(t[10]=[e("div",{class:"text-h6"},"Final Confirmation",-1)])),_:1}),s(S,null,{default:a(()=>t[11]||(t[11]=[e("p",null,"Are you absolutely sure you want to delete this product?",-1),e("p",{class:"text-negative"},"This action cannot be undone.",-1)])),_:1}),s(O,{align:"right"},{default:a(()=>[z(s(i,{flat:"",label:"Cancel",color:"primary"},null,512),[[M]]),s(i,{flat:"",label:"Delete",color:"negative",onClick:$})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(K,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=n=>p.value=n),message:"Product deleted successfully!"},null,8,["modelValue"])],64))}};export{Pe as default};
