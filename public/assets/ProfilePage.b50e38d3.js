import{b5 as Ke,r as S,A as y,ab as at,l as Oe,af as Mt,s as de,V as ft,B as H,bl as gt,W as it,az as bt,ap as Ut,i as oe,aG as pt,E as Me,aQ as Rt,x as Se,D as lt,y as yt,z as ht,T as Qt,aV as Dt,Y as ce,am as xt,al as _t,aA as Ft,aR as Nt,bm as Qe,ak as ut,b7 as Ye,bn as Ge,b1 as jt,bo as dt,ah as Ot,_ as ke,g as wt,o as V,h as ie,N as xe,c as O,a,t as R,f as t,w as o,ad as ze,F as _e,d as Ie,m as Ce,j as Wt,e as z,aB as Ht,O as se,q as Z,Q as N,p as re,u as St,aW as Je,aX as ct,ba as Kt,bp as Yt,bq as mt,br as Gt,L as Jt,C as pe,aK as Xe,v as Ee,J as De,aD as Xt,bs as Zt}from"./index.c533f99f.js";import{Q as Ze}from"./QAvatar.55704798.js";import{Q as et}from"./QCardActions.d8fc215a.js";import{a as ea}from"./use-id.c9ffd3a4.js";import{u as ta,a as aa,b as la,c as na}from"./use-panel.beb5b828.js";import{d as oa}from"./date.28e87b3d.js";import{Q as sa}from"./QSkeleton.93e60c06.js";import{Q as tt}from"./QList.18febcbe.js";import{u as Pt}from"./use-quasar.22bfa1f7.js";import{f as ra,a as qe,u as qt,b as Ct,Q as ia}from"./QForm.e14596c2.js";import{b as be,a as we,Q as Be}from"./QItemLabel.d261921f.js";import{Q as kt}from"./QSeparator.c5a25909.js";import{u as ua,Q as da}from"./productAttributes.3cc5e75a.js";import{Q as ge}from"./QInput.be86d520.js";import{Q as Ae,r as ca}from"./QSelect.81433439.js";import{Q as ma}from"./QResizeObserver.94d55812.js";import{Q as va}from"./QMenu.b2ec819b.js";import{b as fa}from"./format.8ac60962.js";import"./touch.9135741d.js";import"./selection.4b85802c.js";import"./use-render-cache.3aae9b27.js";import"./QChip.7995d9ec.js";import"./private.use-form.35f2d056.js";let ga=0;const ba=["click","keydown"],pa={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${ga++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ya(e,v,s,c){const l=Mt(gt,Ke);if(l===Ke)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Ke;const{proxy:h}=Me(),b=S(null),_=S(null),m=S(null),i=y(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),M=y(()=>l.currentModel.value===e.name),K=y(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(M.value===!0?" q-tab--active"+(l.tabProps.value.activeClass?" "+l.tabProps.value.activeClass:"")+(l.tabProps.value.activeColor?` text-${l.tabProps.value.activeColor}`:"")+(l.tabProps.value.activeBgColor?` bg-${l.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&l.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||l.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(c!==void 0?c.linkClass.value:"")),L=y(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(l.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),E=y(()=>e.disable===!0||l.hasFocus.value===!0||M.value===!1&&l.hasActiveTab.value===!0?-1:e.tabindex||0);function k(x,U){if(U!==!0&&b.value!==null&&b.value.focus(),e.disable===!0){c!==void 0&&c.hasRouterLink.value===!0&&it(x);return}if(c===void 0){l.updateModel({name:e.name}),s("click",x);return}if(c.hasRouterLink.value===!0){const I=(Q={})=>{let P;const $=Q.to===void 0||Rt(Q.to,e.to)===!0?l.avoidRouteWatcher=ea():null;return c.navigateToRouterLink(x,{...Q,returnRouterError:!0}).catch(j=>{P=j}).then(j=>{if($===l.avoidRouteWatcher&&(l.avoidRouteWatcher=!1,P===void 0&&(j===void 0||j.message!==void 0&&j.message.startsWith("Avoided redundant navigation")===!0)&&l.updateModel({name:e.name})),Q.returnRouterError===!0)return P!==void 0?Promise.reject(P):j})};s("click",x,I),x.defaultPrevented!==!0&&I();return}s("click",x)}function f(x){bt(x,[13,32])?k(x,!0):Ut(x)!==!0&&x.keyCode>=35&&x.keyCode<=40&&x.altKey!==!0&&x.metaKey!==!0&&l.onKbdNavigate(x.keyCode,h.$el)===!0&&it(x),s("keydown",x)}function F(){const x=l.tabProps.value.narrowIndicator,U=[],I=H("div",{ref:m,class:["q-tab__indicator",l.tabProps.value.indicatorClass]});e.icon!==void 0&&U.push(H(oe,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&U.push(H("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&U.push(e.alertIcon!==void 0?H(oe,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):H("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),x===!0&&U.push(I);const Q=[H("div",{class:"q-focus-helper",tabindex:-1,ref:b}),H("div",{class:L.value},pt(v.default,U))];return x===!1&&Q.push(I),Q}const Y={name:y(()=>e.name),rootRef:_,tabIndicatorRef:m,routeData:c};at(()=>{l.unregisterTab(Y)}),Oe(()=>{l.registerTab(Y)});function W(x,U){const I={ref:_,class:K.value,tabindex:E.value,role:"tab","aria-selected":M.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:k,onKeydown:f,...U};return de(H(x,I,F()),[[ft,i.value]])}return{renderTab:W,$tabs:l}}var Ne=Se({name:"QTab",props:pa,emits:ba,setup(e,{slots:v,emit:s}){const{renderTab:c}=ya(e,v,s);return()=>c("div")}}),je=Se({name:"QTabPanel",props:ta,setup(e,{slots:v}){return()=>H("div",{class:"q-tab-panel",role:"tabpanel"},lt(v.default))}}),Tt=Se({name:"QTabPanels",props:{...aa,...yt},emits:la,setup(e,{slots:v}){const s=Me(),c=ht(e,s.proxy.$q),{updatePanelsList:l,getPanelContent:h,panelDirectives:b}=na(),_=y(()=>"q-tab-panels q-panel-parent"+(c.value===!0?" q-tab-panels--dark q-dark":""));return()=>(l(v),Qt("div",{class:_.value},h(),"pan",e.swipeable,()=>b.value))}});const{passive:he}=Nt;var ha=Se({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:Dt,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:v,emit:s}){const c=S(!1),l=S(!0),h=S(null),b=S(null);let _=e.initialIndex,m,i;const M=y(()=>"q-infinite-scroll__loading"+(c.value===!0?"":" invisible"));function K(){if(e.disable===!0||c.value===!0||l.value===!1)return;const P=Qe(m),$=Ye(m),j=dt(m);e.reverse===!1?Math.round($+j+e.offset)>=Math.round(P)&&L():Math.round($)<=e.offset&&L()}function L(){if(e.disable===!0||c.value===!0||l.value===!1)return;_++,c.value=!0;const P=Qe(m);s("load",_,$=>{l.value===!0&&(c.value=!1,ut(()=>{if(e.reverse===!0){const j=Qe(m),le=Ye(m),ne=j-P;Ge(m,le+ne)}$===!0?f():h.value&&h.value.closest("body")&&i()}))})}function E(){_=0}function k(){l.value===!1&&(l.value=!0,m.addEventListener("scroll",i,he)),K()}function f(){l.value===!0&&(l.value=!1,c.value=!1,m.removeEventListener("scroll",i,he),i!==void 0&&i.cancel!==void 0&&i.cancel())}function F(){if(m&&l.value===!0&&m.removeEventListener("scroll",i,he),m=jt(h.value,e.scrollTarget),l.value===!0){if(m.addEventListener("scroll",i,he),e.reverse===!0){const P=Qe(m),$=dt(m);Ge(m,P-$)}K()}}function Y(P){_=P}function W(P){P=parseInt(P,10);const $=i;i=P<=0?K:Ot(K,isNaN(P)===!0?100:P),m&&l.value===!0&&($!==void 0&&m.removeEventListener("scroll",$,he),m.addEventListener("scroll",i,he))}function x(P){if(U.value===!0){if(b.value===null){P!==!0&&ut(()=>{x(!0)});return}const $=`${c.value===!0?"un":""}pauseAnimations`;Array.from(b.value.getElementsByTagName("svg")).forEach(j=>{j[$]()})}}const U=y(()=>e.disable!==!0&&l.value===!0);ce([c,U],()=>{x()}),ce(()=>e.disable,P=>{P===!0?f():k()}),ce(()=>e.reverse,()=>{c.value===!1&&l.value===!0&&K()}),ce(()=>e.scrollTarget,F),ce(()=>e.debounce,W);let I=!1;xt(()=>{I!==!1&&m&&Ge(m,I)}),_t(()=>{I=m?Ye(m):!1}),at(()=>{l.value===!0&&m.removeEventListener("scroll",i,he)}),Oe(()=>{W(e.debounce),F(),c.value===!1&&x()});const Q=Me();return Object.assign(Q.proxy,{poll:()=>{i!==void 0&&i()},trigger:L,stop:f,reset:E,resume:k,setIndex:Y,updateScrollTarget:F}),()=>{const P=Ft(v.default,[]);return U.value===!0&&P[e.reverse===!1?"push":"unshift"](H("div",{ref:b,class:M.value},lt(v.loading))),H("div",{class:"q-infinite-scroll",ref:h},P)}}});const xa=["src","alt"],_a={class:"space-y-0.5 sm:space-y-1"},wa={class:"font-semibold text-[11px] sm:text-xs md:text-sm leading-tight truncate"},Sa={class:"text-gray-500 text-[10px] sm:text-xs leading-none truncate"},Pa={class:"flex items-center gap-1 sm:gap-2 pb-1"},qa={class:"text-primary font-semibold text-[11px] sm:text-xs md:text-sm leading-none"},Ca={class:"text-gray-700 font-medium text-[10px] sm:text-xs leading-none truncate"},ka={class:"flex items-center gap-0.5 text-gray-500 flex-nowrap"},Ta={class:"text-[10px] sm:text-xs leading-none truncate whitespace-nowrap"},Va={__name:"ProductCard",props:{product:{type:Object,required:!0},loading:{type:Boolean,default:!1},displayType:{type:String,default:"grid",validator:e=>["grid","row"].includes(e)}},setup(e){const v=wt(),s=c=>{v.push(`/products/${c.id}`)};return(c,l)=>{var h,b,_,m,i,M,K,L,E,k,f,F,Y,W;return e.loading?(V(),ie(sa,{key:0,class:xe({"w-full aspect-[4/5]":e.displayType==="grid","w-[225px] h-[260px]":e.displayType==="row"}),bordered:""},null,8,["class"])):(V(),O("div",{key:1,class:xe({"w-full":e.displayType==="grid","w-[225px]":e.displayType==="row","bg-white rounded-lg shadow-sm hover:shadow-lg transition-all duration-200 ease-in-out hover:-translate-y-1 cursor-pointer":!0}),onClick:l[0]||(l[0]=x=>s(e.product))},[a("div",{class:xe({"relative w-full rounded-t-lg":!0,"aspect-[3/2]":e.displayType==="grid","h-36":e.displayType==="row"})},[a("img",{src:((b=(h=e.product)==null?void 0:h.media[0])==null?void 0:b.url)||"https://placehold.co/600x400",alt:(_=e.product)==null?void 0:_.title,class:"w-full h-full object-cover rounded-t-lg"},null,8,xa)],2),a("div",{class:xe({"p-2":!0,"p-1.5 sm:p-2":e.displayType==="grid"})},[a("div",_a,[a("h3",wa,R(((m=e.product)==null?void 0:m.title)||"Untitled Product"),1),a("p",Sa,R(((M=(i=e.product)==null?void 0:i.brand)==null?void 0:M.name)||"Unknown Brand"),1),a("div",Pa,[a("span",qa," $"+R(((K=e.product)==null?void 0:K.price)||"0")+"/day ",1),l[1]||(l[1]=a("span",{class:"text-gray-300 text-[10px] sm:text-xs"},"|",-1)),a("span",Ca,R(((E=(L=e.product)==null?void 0:L.size)==null?void 0:E.display_name)||"N/A"),1)]),a("div",ka,[l[2]||(l[2]=a("i",{class:"fas fa-map-marker-alt text-[10px] sm:text-xs"},null,-1)),a("span",Ta,R(((f=(k=e.product)==null?void 0:k.location)==null?void 0:f.city)||"Unknown")+", "+R(((W=(Y=(F=e.product)==null?void 0:F.location)==null?void 0:Y.province)==null?void 0:W.abbreviation)||"Unknown"),1)])])],2)],2))}}};var vt=ke(Va,[["__scopeId","data-v-41f75942"]]);const $a={class:"row justify-center q-my-md col-span-full"},La={__name:"ProductGrid",props:{products:{type:Array,required:!0},loading:{type:Boolean,default:!1},currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},perPage:{type:Number,default:15},total:{type:Number,default:0},displayType:{type:String,default:"grid",validator:e=>["grid","row"].includes(e)}},emits:["load-more"],setup(e,{emit:v}){const s=e,c=v,l=y(()=>s.perPage||15),h=y(()=>s.currentPage<s.totalPages),b=async(_,m)=>{h.value&&!s.loading&&await c("load-more"),m()};return(_,m)=>(V(),O("div",null,[t(ha,{onLoad:b,offset:250,disable:e.loading||e.currentPage>=e.totalPages,class:xe({"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 gap-2 w-full":e.displayType==="grid","flex flex-wrap gap-3":e.displayType==="row"})},{loading:o(()=>[a("div",$a,[t(ze,{color:"primary",size:"40px"})])]),default:o(()=>[!e.loading&&e.products.length?(V(!0),O(_e,{key:0},Ie(e.products,i=>(V(),ie(vt,{key:i.id,product:i,"display-type":e.displayType,class:xe({"w-full":e.displayType==="grid"})},null,8,["product","display-type","class"]))),128)):e.loading?(V(!0),O(_e,{key:1},Ie(l.value,i=>(V(),ie(vt,{key:i,loading:!0,product:{},"display-type":e.displayType,class:xe({"w-full":e.displayType==="grid"})},null,8,["display-type","class"]))),128)):Ce("",!0)]),_:1},8,["disable","class"])]))}};var Aa=ke(La,[["__scopeId","data-v-7b9921e2"]]);const Ba={__name:"YourProducts",props:{userId:{type:Number,required:!0}},setup(e){const v=e,s=Wt(),c=S([]),l=async()=>{try{c.value=await s.fetchProducts({filter:"userProducts",user_id:v.userId})}catch(b){console.error("Error fetching products:",b)}},h=async()=>{s.pagination.currentPage++,await l()};return l(),(b,_)=>(V(),O("div",null,[_[0]||(_[0]=a("h2",{class:"text-h6 q-mb-md"},"Your Products",-1)),t(Aa,{products:c.value,loading:z(s).isLoading,"current-page":z(s).pagination.currentPage,"total-pages":z(s).pagination.totalPages,onLoadMore:h},null,8,["products","loading","current-page","total-pages"])]))}};const za={__name:"PaymentCard",props:{transaction:{type:Object,required:!0}},setup(e){return(v,s)=>{const c=Ht("router-link");return de((V(),ie(Be,{clickable:""},{default:o(()=>[t(be,{avatar:""},{default:o(()=>[t(oe,{name:e.transaction.type==="add"?"arrow_upward":"arrow_downward",color:e.transaction.type==="add"?"positive":"negative"},null,8,["name","color"])]),_:1}),t(be,null,{default:o(()=>[t(we,null,{default:o(()=>[se(R(e.transaction.description),1)]),_:1}),t(we,{caption:"",class:"flex items-center"},{default:o(()=>{var l;return[a("span",null,R(z(ra)(e.transaction.created_at)),1),t(kt,{vertical:"",spaced:"sm",class:"q-mx-sm"}),(l=e.transaction.rental)!=null&&l.offer?(V(),ie(c,{key:0,to:{name:"offer-details",params:{id:e.transaction.rental.offer.id}},class:"text-primary text-weight-medium"},{default:o(()=>[se(" Offer #"+R(e.transaction.rental.offer.id),1)]),_:1},8,["to"])):Ce("",!0)]}),_:1})]),_:1}),t(be,{side:""},{default:o(()=>[t(we,null,{default:o(()=>[se(R(z(qe)(e.transaction.amount)),1)]),_:1})]),_:1})]),_:1})),[[ft]])}}};var Vt=ke(za,[["__scopeId","data-v-7df21856"]]);const Ea={class:"payment-info"},Ia={class:"q-mb-lg"},Ma={class:"row items-center justify-between"},Ua={class:"text-h3 text-weight-bold text-primary q-mt-sm"},Ra={class:"row q-gutter-sm"},Qa={class:"row items-center justify-between"},Da={class:"row items-center justify-between"},Fa={class:"row q-col-gutter-md"},Na={class:"col-12 col-sm-6"},ja={class:"text-h5 text-weight-medium q-mt-sm"},Oa={class:"col-12 col-sm-6"},Wa={class:"text-h5 text-weight-medium q-mt-sm"},Ha={__name:"PaymentsInfo",setup(e){Pt();const v=qt(),s=Ct(),c=y(()=>parseFloat(v.getBalance)>0&&s.hasStripeAccount&&s.isAccountVerified),l=async()=>{try{const _=await s.getDashboardLink();window.open(_,"_blank")}catch(_){console.error(_)}},h=async()=>{try{await s.createStripeAccount();const _=await s.getAccountLink();window.open(_,"_blank")}catch(_){console.error(_)}},b=async()=>{try{const _=await s.getAccountLink();window.open(_,"_blank")}catch(_){console.error(_)}};return Oe(async()=>{await Promise.all([v.init(),s.fetchStripeAccount()])}),(_,m)=>(V(),O("div",Ea,[a("div",Ia,[t(re,{class:"balance-card q-mb-md"},{default:o(()=>[t(Z,null,{default:o(()=>[a("div",Ma,[a("div",null,[m[0]||(m[0]=a("div",{class:"text-subtitle1 text-grey-7"},"Total Balance",-1)),a("div",Ua,R(z(qe)(z(v).getBalance)),1)]),a("div",Ra,[t(N,{outline:"",color:"primary",label:"Stripe Dashboard","no-caps":"",loading:z(s).isLoading,disable:!z(s).hasStripeAccount,onClick:l},null,8,["loading","disable"]),t(N,{color:"primary",label:"Withdraw","no-caps":"",disable:!c.value,to:{name:"payment-withdraw"}},null,8,["disable"])])])]),_:1})]),_:1}),z(s).hasStripeAccount?z(s).isAccountVerified?Ce("",!0):(V(),ie(re,{key:1,class:"q-mb-md bg-warning-1"},{default:o(()=>[t(Z,null,{default:o(()=>[a("div",Da,[m[2]||(m[2]=a("div",null,[a("div",{class:"text-subtitle1 text-weight-medium"},"Complete Account Verification"),a("div",{class:"text-body2 text-grey-7 q-mt-sm"}," Your Stripe account needs to be verified to receive payments ")],-1)),t(N,{color:"warning",label:"Complete Verification","no-caps":"",loading:z(s).isLoading,onClick:b},null,8,["loading"])])]),_:1})]),_:1})):(V(),ie(re,{key:0,class:"q-mb-md bg-grey-1"},{default:o(()=>[t(Z,null,{default:o(()=>[a("div",Qa,[m[1]||(m[1]=a("div",null,[a("div",{class:"text-subtitle1 text-weight-medium"},"Set Up Stripe Account"),a("div",{class:"text-body2 text-grey-7 q-mt-sm"}," To receive payments, you need to set up your Stripe account ")],-1)),t(N,{color:"primary",label:"Set Up Account","no-caps":"",loading:z(s).isLoading,onClick:h},null,8,["loading"])])]),_:1})]),_:1})),a("div",Fa,[a("div",Na,[t(re,{class:"text-center"},{default:o(()=>[t(Z,null,{default:o(()=>[m[3]||(m[3]=a("div",{class:"text-subtitle1 text-grey-7"},"Total Transactions",-1)),a("div",ja,R(z(v).getTransactions.length),1)]),_:1})]),_:1})]),a("div",Oa,[t(re,{class:"text-center"},{default:o(()=>[t(Z,null,{default:o(()=>[m[4]||(m[4]=a("div",{class:"text-subtitle1 text-grey-7"},"This Month",-1)),a("div",Wa,R(z(qe)(z(v).getCurrentMonthTotal)),1)]),_:1})]),_:1})])])]),m[5]||(m[5]=a("h2",{class:"text-h6 q-mb-md"},"Transaction History",-1)),t(tt,{bordered:"",separator:""},{default:o(()=>[(V(!0),O(_e,null,Ie(z(v).getTransactions,i=>(V(),ie(Vt,{key:i.id,transaction:i},null,8,["transaction"]))),128))]),_:1})]))}};var Ka=ke(Ha,[["__scopeId","data-v-4442af30"]]);const Ya={class:"profile-settings"},Ga={key:0,class:"absolute inset-0 bg-white bg-opacity-75 z-50 flex items-center justify-center"},Ja={class:"border-2 border-dashed border-gray-300 rounded-lg p-4"},Xa={class:"text-center p-4"},Za=["src"],el={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tl={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},al={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ll={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},nl={class:"flex justify-end q-mt-lg"},ol="https://placehold.co/200x200/eeeeee/999999?text=User",sl={__name:"ProfileSettings",props:{user:{type:Object,required:!0}},emits:["update"],setup(e,{emit:v}){var W,x,U,I,Q,P,$,j,le,ne,X,q,w,ee,A,u,n,C,Pe,me,ve,Te,Ve,$e,ue,Ue;const s=e,c=v,l=St(),h=ua(),b=S(!1),_=S(!1),m=S(null),i=S({name:((W=s.user)==null?void 0:W.name)||"",username:((x=s.user)==null?void 0:x.username)||"",email:((U=s.user)==null?void 0:U.email)||"",phone_number:((I=s.user)==null?void 0:I.phone_number)||"",profile_picture:null,profile:{birthday:((P=(Q=s.user)==null?void 0:Q.profile)==null?void 0:P.birthday)||"",postal_code:((j=($=s.user)==null?void 0:$.profile)==null?void 0:j.postal_code)||"",city:((ne=(le=s.user)==null?void 0:le.profile)==null?void 0:ne.city)||"",country:((q=(X=s.user)==null?void 0:X.profile)==null?void 0:q.country)||"",style:((A=(ee=(w=s.user)==null?void 0:w.profile)==null?void 0:ee.style)==null?void 0:A.id)||null},sizes:{letter_sizes:((C=(n=(u=s.user)==null?void 0:u.sizes)==null?void 0:n.letter_sizes)==null?void 0:C.map(te=>te.id))||[],waist_sizes:((ve=(me=(Pe=s.user)==null?void 0:Pe.sizes)==null?void 0:me.waist_sizes)==null?void 0:ve.map(te=>te.id))||[],number_sizes:(($e=(Ve=(Te=s.user)==null?void 0:Te.sizes)==null?void 0:Ve.number_sizes)==null?void 0:$e.map(te=>te.id))||[]},brands:((Ue=(ue=s.user)==null?void 0:ue.brands)==null?void 0:Ue.map(te=>te.id))||[]}),M=y(()=>h.styles),K=y(()=>h.brands),L=y(()=>h.letterSizes),E=y(()=>h.waistSizes),k=y(()=>h.numberSizes),f=te=>{!te||(m.value=URL.createObjectURL(te))},F=async()=>{var te;try{_.value=!0;const p=new FormData;Object.keys(i.value).forEach(d=>{d==="profile_picture"&&i.value[d]?p.append(d,i.value[d]):d==="sizes"||d==="brands"||d==="profile"?p.append(d,JSON.stringify(i.value[d])):p.append(d,i.value[d])}),console.log((te=l.currentUser)==null?void 0:te.id),await l.updateUser(p),c("update")}catch(p){console.error("Failed to update profile:",p)}finally{_.value=!1}};return(async()=>{await h.fetchAllAttributes()})(),(te,p)=>(V(),O("div",Ya,[b.value?(V(),O("div",Ga,[t(ze,{color:"primary",size:"3em"})])):Ce("",!0),t(ia,{onSubmit:F,class:"q-gutter-md"},{default:o(()=>[a("div",Ja,[a("div",Xa,[t(Ze,{size:"150px",class:"shadow-lg"},{default:o(()=>{var d;return[a("img",{src:m.value||((d=e.user)==null?void 0:d.profile_picture)||ol},null,8,Za)]}),_:1}),t(da,{modelValue:i.value.profile_picture,"onUpdate:modelValue":[p[0]||(p[0]=d=>i.value.profile_picture=d),f],label:"Update Profile Picture",accept:".jpg,.jpeg,.png",class:"q-mt-md"},{prepend:o(()=>[t(oe,{name:"fas fa-camera"})]),_:1},8,["modelValue"])])]),a("div",el,[t(ge,{modelValue:i.value.name,"onUpdate:modelValue":p[1]||(p[1]=d=>i.value.name=d),label:"Full Name *",rules:[d=>!!d||"Name is required"],"lazy-rules":""},null,8,["modelValue","rules"]),t(ge,{modelValue:i.value.username,"onUpdate:modelValue":p[2]||(p[2]=d=>i.value.username=d),label:"Username *",rules:[d=>!!d||"Username is required"],"lazy-rules":""},null,8,["modelValue","rules"]),t(ge,{modelValue:i.value.email,"onUpdate:modelValue":p[3]||(p[3]=d=>i.value.email=d),label:"Email *",type:"email",rules:[d=>!!d||"Email is required",d=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(d)||"Invalid email format"],"lazy-rules":""},null,8,["modelValue","rules"]),t(ge,{modelValue:i.value.phone_number,"onUpdate:modelValue":p[4]||(p[4]=d=>i.value.phone_number=d),label:"Phone Number *",rules:[d=>!!d||"Phone number is required"],mask:"(###) ###-####","lazy-rules":""},null,8,["modelValue","rules"])]),a("div",tl,[t(ge,{modelValue:i.value.profile.birthday,"onUpdate:modelValue":p[5]||(p[5]=d=>i.value.profile.birthday=d),label:"Birthday",type:"date"},null,8,["modelValue"]),t(Ae,{modelValue:i.value.profile.style,"onUpdate:modelValue":p[6]||(p[6]=d=>i.value.profile.style=d),options:M.value,label:"Style Preference *","option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["modelValue","options"])]),a("div",al,[t(ge,{modelValue:i.value.profile.city,"onUpdate:modelValue":p[7]||(p[7]=d=>i.value.profile.city=d),label:"City *",rules:[d=>!!d||"City is required"],"lazy-rules":""},null,8,["modelValue","rules"]),t(ge,{modelValue:i.value.profile.country,"onUpdate:modelValue":p[8]||(p[8]=d=>i.value.profile.country=d),label:"Country *",rules:[d=>!!d||"Country is required"],"lazy-rules":""},null,8,["modelValue","rules"]),t(ge,{modelValue:i.value.profile.postal_code,"onUpdate:modelValue":p[9]||(p[9]=d=>i.value.profile.postal_code=d),label:"Postal Code *",rules:[d=>!!d||"Postal code is required"],"lazy-rules":""},null,8,["modelValue","rules"])]),a("div",null,[p[18]||(p[18]=a("div",{class:"text-h6 q-mb-md"},"Size Preferences",-1)),a("div",ll,[a("div",null,[p[15]||(p[15]=a("div",{class:"text-subtitle2 q-mb-sm"},"Letter Sizes",-1)),t(Ae,{modelValue:i.value.sizes.letter_sizes,"onUpdate:modelValue":p[10]||(p[10]=d=>i.value.sizes.letter_sizes=d),options:L.value,multiple:"",label:"Select Sizes","option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["modelValue","options"])]),a("div",null,[p[16]||(p[16]=a("div",{class:"text-subtitle2 q-mb-sm"},"Waist Sizes",-1)),t(Ae,{modelValue:i.value.sizes.waist_sizes,"onUpdate:modelValue":p[11]||(p[11]=d=>i.value.sizes.waist_sizes=d),options:E.value,multiple:"",label:"Select Sizes","option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["modelValue","options"])]),a("div",null,[p[17]||(p[17]=a("div",{class:"text-subtitle2 q-mb-sm"},"Number Sizes",-1)),t(Ae,{modelValue:i.value.sizes.number_sizes,"onUpdate:modelValue":p[12]||(p[12]=d=>i.value.sizes.number_sizes=d),options:k.value,multiple:"",label:"Select Sizes","option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["modelValue","options"])])])]),a("div",null,[p[19]||(p[19]=a("div",{class:"text-h6 q-mb-md"},"Brand Preferences",-1)),t(Ae,{modelValue:i.value.brands,"onUpdate:modelValue":p[13]||(p[13]=d=>i.value.brands=d),options:K.value,multiple:"",label:"Select Favorite Brands","option-value":"id","option-label":"name","emit-value":"","map-options":""},null,8,["modelValue","options"])]),a("div",nl,[t(N,{type:"submit",color:"primary",loading:_.value,label:"Save Changes",onClick:p[14]||(p[14]=d=>F()),"no-caps":""},null,8,["loading"])])]),_:1})]))}};function rl(e,v,s){const c=s===!0?["left","right"]:["top","bottom"];return`absolute-${v===!0?c[0]:c[1]}${e?` text-${e}`:""}`}const il=["left","center","right","justify"];var ul=Se({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>il.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:v,emit:s}){const{proxy:c}=Me(),{$q:l}=c,{registerTick:h}=Je(),{registerTick:b}=Je(),{registerTick:_}=Je(),{registerTimeout:m,removeTimeout:i}=ct(),{registerTimeout:M,removeTimeout:K}=ct(),L=S(null),E=S(null),k=S(e.modelValue),f=S(!1),F=S(!0),Y=S(!1),W=S(!1),x=[],U=S(0),I=S(!1);let Q=null,P=null,$;const j=y(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:rl(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),le=y(()=>{const r=U.value,g=k.value;for(let T=0;T<r;T++)if(x[T].name.value===g)return!0;return!1}),ne=y(()=>`q-tabs__content--align-${f.value===!0?"left":W.value===!0?"justify":e.align}`),X=y(()=>`q-tabs row no-wrap items-center q-tabs--${f.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),q=y(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+ne.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),w=y(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),ee=y(()=>e.vertical!==!0&&l.lang.rtl===!0),A=y(()=>ca===!1&&ee.value===!0);ce(ee,ve),ce(()=>e.modelValue,r=>{u({name:r,setCurrent:!0,skipEmit:!0})}),ce(()=>e.outsideArrows,n);function u({name:r,setCurrent:g,skipEmit:T}){k.value!==r&&(T!==!0&&e["onUpdate:modelValue"]!==void 0&&s("update:modelValue",r),(g===!0||e["onUpdate:modelValue"]===void 0)&&(Pe(k.value,r),k.value=r))}function n(){h(()=>{L.value&&C({width:L.value.offsetWidth,height:L.value.offsetHeight})})}function C(r){if(w.value===void 0||E.value===null)return;const g=r[w.value.container],T=Math.min(E.value[w.value.scroll],Array.prototype.reduce.call(E.value.children,(J,D)=>J+(D[w.value.content]||0),0)),G=g>0&&T>g;f.value=G,G===!0&&b(ve),W.value=g<parseInt(e.breakpoint,10)}function Pe(r,g){const T=r!=null&&r!==""?x.find(J=>J.name.value===r):null,G=g!=null&&g!==""?x.find(J=>J.name.value===g):null;if(Re===!0)Re=!1;else if(T&&G){const J=T.tabIndicatorRef.value,D=G.tabIndicatorRef.value;Q!==null&&(clearTimeout(Q),Q=null),J.style.transition="none",J.style.transform="none",D.style.transition="none",D.style.transform="none";const B=J.getBoundingClientRect(),ae=D.getBoundingClientRect();D.style.transform=e.vertical===!0?`translate3d(0,${B.top-ae.top}px,0) scale3d(1,${ae.height?B.height/ae.height:1},1)`:`translate3d(${B.left-ae.left}px,0,0) scale3d(${ae.width?B.width/ae.width:1},1,1)`,_(()=>{Q=setTimeout(()=>{Q=null,D.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",D.style.transform="none"},70)})}G&&f.value===!0&&me(G.rootRef.value)}function me(r){const{left:g,width:T,top:G,height:J}=E.value.getBoundingClientRect(),D=r.getBoundingClientRect();let B=e.vertical===!0?D.top-G:D.left-g;if(B<0){E.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(B),ve();return}B+=e.vertical===!0?D.height-J:D.width-T,B>0&&(E.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(B),ve())}function ve(){const r=E.value;if(r===null)return;const g=r.getBoundingClientRect(),T=e.vertical===!0?r.scrollTop:Math.abs(r.scrollLeft);ee.value===!0?(F.value=Math.ceil(T+g.width)<r.scrollWidth-1,Y.value=T>0):(F.value=T>0,Y.value=e.vertical===!0?Math.ceil(T+g.height)<r.scrollHeight:Math.ceil(T+g.width)<r.scrollWidth)}function Te(r){P!==null&&clearInterval(P),P=setInterval(()=>{p(r)===!0&&ue()},5)}function Ve(){Te(A.value===!0?Number.MAX_SAFE_INTEGER:0)}function $e(){Te(A.value===!0?0:Number.MAX_SAFE_INTEGER)}function ue(){P!==null&&(clearInterval(P),P=null)}function Ue(r,g){const T=Array.prototype.filter.call(E.value.children,ae=>ae===g||ae.matches&&ae.matches(".q-tab.q-focusable")===!0),G=T.length;if(G===0)return;if(r===36)return me(T[0]),T[0].focus(),!0;if(r===35)return me(T[G-1]),T[G-1].focus(),!0;const J=r===(e.vertical===!0?38:37),D=r===(e.vertical===!0?40:39),B=J===!0?-1:D===!0?1:void 0;if(B!==void 0){const ae=ee.value===!0?-1:1,fe=T.indexOf(g)+B*ae;return fe>=0&&fe<G&&(me(T[fe]),T[fe].focus({preventScroll:!0})),!0}}const te=y(()=>A.value===!0?{get:r=>Math.abs(r.scrollLeft),set:(r,g)=>{r.scrollLeft=-g}}:e.vertical===!0?{get:r=>r.scrollTop,set:(r,g)=>{r.scrollTop=g}}:{get:r=>r.scrollLeft,set:(r,g)=>{r.scrollLeft=g}});function p(r){const g=E.value,{get:T,set:G}=te.value;let J=!1,D=T(g);const B=r<D?-1:1;return D+=B*5,D<0?(J=!0,D=0):(B===-1&&D<=r||B===1&&D>=r)&&(J=!0,D=r),G(g,D),ve(),J}function d(r,g){for(const T in r)if(r[T]!==g[T])return!1;return!0}function $t(){let r=null,g={matchedLen:0,queryDiff:9999,hrefLen:0};const T=x.filter(B=>B.routeData!==void 0&&B.routeData.hasRouterLink.value===!0),{hash:G,query:J}=c.$route,D=Object.keys(J).length;for(const B of T){const ae=B.routeData.exact.value===!0;if(B.routeData[ae===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:fe,query:We,matched:Et,href:It}=B.routeData.resolvedLink.value,He=Object.keys(We).length;if(ae===!0){if(fe!==G||He!==D||d(J,We)===!1)continue;r=B.name.value;break}if(fe!==""&&fe!==G||He!==0&&d(We,J)===!1)continue;const ye={matchedLen:Et.length,queryDiff:D-He,hrefLen:It.length-fe.length};if(ye.matchedLen>g.matchedLen){r=B.name.value,g=ye;continue}else if(ye.matchedLen!==g.matchedLen)continue;if(ye.queryDiff<g.queryDiff)r=B.name.value,g=ye;else if(ye.queryDiff!==g.queryDiff)continue;ye.hrefLen>g.hrefLen&&(r=B.name.value,g=ye)}if(r===null&&x.some(B=>B.routeData===void 0&&B.name.value===k.value)===!0){Re=!1;return}u({name:r,setCurrent:!0})}function Lt(r){if(i(),I.value!==!0&&L.value!==null&&r.target&&typeof r.target.closest=="function"){const g=r.target.closest(".q-tab");g&&L.value.contains(g)===!0&&(I.value=!0,f.value===!0&&me(g))}}function At(){m(()=>{I.value=!1},30)}function Le(){ot.avoidRouteWatcher===!1?M($t):K()}function nt(){if($===void 0){const r=ce(()=>c.$route.fullPath,Le);$=()=>{r(),$=void 0}}}function Bt(r){x.push(r),U.value++,n(),r.routeData===void 0||c.$route===void 0?M(()=>{if(f.value===!0){const g=k.value,T=g!=null&&g!==""?x.find(G=>G.name.value===g):null;T&&me(T.rootRef.value)}}):(nt(),r.routeData.hasRouterLink.value===!0&&Le())}function zt(r){x.splice(x.indexOf(r),1),U.value--,n(),$!==void 0&&r.routeData!==void 0&&(x.every(g=>g.routeData===void 0)===!0&&$(),Le())}const ot={currentModel:k,tabProps:j,hasFocus:I,hasActiveTab:le,registerTab:Bt,unregisterTab:zt,verifyRouteModel:Le,updateModel:u,onKbdNavigate:Ue,avoidRouteWatcher:!1};Kt(gt,ot);function st(){Q!==null&&clearTimeout(Q),ue(),$!==void 0&&$()}let rt,Re;return at(st),_t(()=>{rt=$!==void 0,st()}),xt(()=>{rt===!0&&(nt(),Re=!0,Le()),n()}),()=>H("div",{ref:L,class:X.value,role:"tablist",onFocusin:Lt,onFocusout:At},[H(ma,{onResize:C}),H("div",{ref:E,class:q.value,onScroll:ve},lt(v.default)),H(oe,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(F.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||l.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:Ve,onTouchstartPassive:Ve,onMouseupPassive:ue,onMouseleavePassive:ue,onTouchendPassive:ue}),H(oe,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(Y.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||l.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:$e,onTouchstartPassive:$e,onMouseupPassive:ue,onMouseleavePassive:ue,onTouchendPassive:ue})])}});const dl=["top","middle","bottom"];var cl=Se({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>dl.includes(e)}},setup(e,{slots:v}){const s=y(()=>e.align!==void 0?{verticalAlign:e.align}:null),c=y(()=>{const l=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(l!==void 0?` text-${l}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>H("div",{class:c.value,style:s.value,role:"status","aria-label":e.label},pt(v.default,e.label!==void 0?[e.label]:[]))}});function Fe(e,v){return[!0,!1].includes(e)?e:v}var ml=Se({name:"QPagination",props:{...yt,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||Yt.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:v}){const{proxy:s}=Me(),{$q:c}=s,l=ht(e,c),h=y(()=>parseInt(e.min,10)),b=y(()=>parseInt(e.max,10)),_=y(()=>parseInt(e.maxPages,10)),m=y(()=>k.value+" / "+b.value),i=y(()=>Fe(e.boundaryLinks,e.input)),M=y(()=>Fe(e.boundaryNumbers,!e.input)),K=y(()=>Fe(e.directionLinks,e.input)),L=y(()=>Fe(e.ellipses,!e.input)),E=S(null),k=y({get:()=>e.modelValue,set:q=>{if(q=parseInt(q,10),e.disable||isNaN(q))return;const w=fa(q,h.value,b.value);e.modelValue!==w&&v("update:modelValue",w)}});ce(()=>`${h.value}|${b.value}`,()=>{k.value=e.modelValue});const f=y(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),F=y(()=>e.gutter in mt?`${mt[e.gutter]}px`:e.gutter||null),Y=y(()=>F.value!==null?`--q-pagination-gutter-parent:-${F.value};--q-pagination-gutter-child:${F.value}`:null),W=y(()=>{const q=[e.iconFirst||c.iconSet.pagination.first,e.iconPrev||c.iconSet.pagination.prev,e.iconNext||c.iconSet.pagination.next,e.iconLast||c.iconSet.pagination.last];return c.lang.rtl===!0?q.reverse():q}),x=y(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),U=y(()=>Gt(e,"flat")),I=y(()=>({[U.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),Q=y(()=>{const q={[U.value]:!1};return e.activeDesign!==""&&(q[e.activeDesign]=!0),q}),P=y(()=>({...Q.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),$=y(()=>{let q=Math.max(_.value,1+(L.value?2:0)+(M.value?2:0));const w={pgFrom:h.value,pgTo:b.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(b.value).length)}em`}};return _.value&&q<b.value-h.value+1&&(q=1+Math.floor(q/2)*2,w.pgFrom=Math.max(h.value,Math.min(b.value-q+1,e.modelValue-Math.floor(q/2))),w.pgTo=Math.min(b.value,w.pgFrom+q-1),M.value&&(w.boundaryStart=!0,w.pgFrom++),L.value&&w.pgFrom>h.value+(M.value?1:0)&&(w.ellipsesStart=!0,w.pgFrom++),M.value&&(w.boundaryEnd=!0,w.pgTo--),L.value&&w.pgTo<b.value-(M.value?1:0)&&(w.ellipsesEnd=!0,w.pgTo--)),w});function j(q){k.value=q}function le(q){k.value=k.value+q}const ne=y(()=>{function q(){k.value=E.value,E.value=null}return{"onUpdate:modelValue":w=>{E.value=w},onKeyup:w=>{bt(w,13)===!0&&q()},onBlur:q}});function X(q,w,ee){const A={"aria-label":w,"aria-current":"false",...I.value,...q};return ee===!0&&Object.assign(A,{"aria-current":"true",...P.value}),w!==void 0&&(e.toFn!==void 0?A.to=e.toFn(w):A.onClick=()=>{j(w)}),H(N,A)}return Object.assign(s,{set:j,setByOffset:le}),()=>{const q=[],w=[];let ee;if(i.value===!0&&(q.push(X({key:"bls",disable:e.disable||e.modelValue<=h.value,icon:W.value[0]},h.value)),w.unshift(X({key:"ble",disable:e.disable||e.modelValue>=b.value,icon:W.value[3]},b.value))),K.value===!0&&(q.push(X({key:"bdp",disable:e.disable||e.modelValue<=h.value,icon:W.value[1]},e.modelValue-1)),w.unshift(X({key:"bdn",disable:e.disable||e.modelValue>=b.value,icon:W.value[2]},e.modelValue+1))),e.input!==!0){ee=[];const{pgFrom:A,pgTo:u,marginalStyle:n}=$.value;if($.value.boundaryStart===!0){const C=h.value===e.modelValue;q.push(X({key:"bns",style:n,disable:e.disable,label:h.value},h.value,C))}if($.value.boundaryEnd===!0){const C=b.value===e.modelValue;w.unshift(X({key:"bne",style:n,disable:e.disable,label:b.value},b.value,C))}$.value.ellipsesStart===!0&&q.push(X({key:"bes",style:n,disable:e.disable,label:"\u2026",ripple:!1},A-1)),$.value.ellipsesEnd===!0&&w.unshift(X({key:"bee",style:n,disable:e.disable,label:"\u2026",ripple:!1},u+1));for(let C=A;C<=u;C++)ee.push(X({key:`bpg${C}`,style:n,disable:e.disable,label:C},C,C===e.modelValue))}return H("div",{class:f.value,...x.value},[H("div",{class:"q-pagination__content row no-wrap items-center",style:Y.value},[...q,e.input===!0?H(ge,{class:"inline",style:{width:`${m.value.length/1.5}em`},type:"number",dense:!0,value:E.value,disable:e.disable,dark:l.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:m.value,min:h.value,max:b.value,...ne.value}):H("div",{class:"q-pagination__middle row justify-center"},ee),...w])])}}});const vl={class:"wallet-manager q-pb-xl"},fl={class:"balance-section q-mb-lg"},gl={class:"row items-center justify-between q-mb-md"},bl={class:"text-h3 text-weight-bold text-primary q-mt-sm"},pl={class:"row q-col-gutter-md"},yl={class:"col-12 col-md-6"},hl={class:"col-12 col-md-6"},xl={key:0,class:"text-center q-pa-md"},_l={key:1,class:"text-center q-pa-lg bg-grey-1 rounded-borders"},wl={class:"row q-col-gutter-md"},Sl={class:"row items-center no-wrap"},Pl={class:"text-subtitle1"},ql={class:"text-caption text-grey-7"},Cl={class:"text-center q-mt-lg"},kl={key:0,class:"text-center q-pa-md"},Tl={key:1,class:"text-center q-pa-lg bg-grey-1 rounded-borders"},Vl={class:"flex justify-center q-mt-md"},$l={key:0,class:"text-center q-pa-md"},Ll={key:1,class:"text-center q-pa-lg bg-grey-1 rounded-borders"},Al={key:2,class:"text-center q-pa-lg bg-warning-1 rounded-borders"},Bl={key:3,class:"text-center q-pa-lg"},zl={key:0,class:"text-negative text-caption q-mt-sm"},El={__name:"WalletManager",setup(e){Pt();const v=qt(),s=Ct(),c=S("payment_methods"),l=S([]),h=S(!1),b=S(!1),_=S(null),m=S(!1),i=S(!1),M=S(null),K=S(null),L=S(null),E=S(null),k=S(!1),f=S(""),F=S(!1),Y=S(1),W=S(!1),x=y(()=>parseFloat(v.getBalance)>0&&s.hasStripeAccount&&s.isAccountVerified),U=y(()=>v.getTransactions.filter(u=>u.type==="credit").reduce((u,n)=>u+parseFloat(n.amount),0).toFixed(2)),I=async()=>{try{h.value=!0;const u=await De.get("/payment-methods");l.value=u.data.data}catch(u){console.error("Error fetching payment methods:",u),console.error("Failed to load payment methods")}finally{h.value=!1}},Q=()=>{!M.value||!E.value||(K.value=M.value.elements(),L.value=K.value.create("card",{style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}),L.value.mount(E.value),L.value.on("change",u=>{k.value=u.complete,f.value=u.error?u.error.message:""}))},P=async()=>{if(!(!M.value||!L.value))try{F.value=!0;const{error:u,paymentMethod:n}=await M.value.createPaymentMethod({type:"card",card:L.value});if(u)throw new Error(u.message);await De.post("/payment-methods",{payment_method_id:n.id,is_default:l.value.length===0}),await I(),b.value=!1,L.value.clear(),k.value=!1,console.log("Payment method added successfully")}catch(u){console.error("Error adding payment method:",u),f.value=u.message||"Failed to add payment method",console.error(f.value)}finally{F.value=!1}},$=u=>{_.value=u,m.value=!0},j=async()=>{if(!!_.value)try{i.value=!0,await De.delete(`/payment-methods/${_.value}`),await I(),m.value=!1,console.log("Payment method removed successfully")}catch(u){console.error("Error removing payment method:",u),console.error("Failed to remove payment method")}finally{i.value=!1}},le=async u=>{try{await De.put(`/payment-methods/${u}/default`),await I(),console.log("Default payment method updated")}catch(n){console.error("Error setting default payment method:",n),console.error("Failed to update default payment method")}},ne=u=>{Y.value=u,v.pagination.currentPage=u,v.fetchTransactions()},X=u=>{const n={visa:"fab fa-cc-visa",mastercard:"fab fa-cc-mastercard",amex:"fab fa-cc-amex",discover:"fab fa-cc-discover",jcb:"fab fa-cc-jcb",diners:"fab fa-cc-diners-club",default:"credit_card"};return n[u==null?void 0:u.toLowerCase()]||n.default},q=async()=>{try{await s.createStripeAccount();const u=await s.getAccountLink();window.open(u,"_blank")}catch(u){console.error("Error setting up Stripe account:",u),console.error("Failed to set up Stripe account")}},w=async()=>{try{const u=await s.getAccountLink();window.open(u,"_blank")}catch(u){console.error("Error getting account link:",u),console.error("Failed to get account link")}},ee=async()=>{try{const u=await s.getDashboardLink();window.open(u,"_blank")}catch(u){console.error("Error opening Stripe dashboard:",u),console.error("Failed to open Stripe dashboard")}},A=async()=>{try{const u={}.VITE_STRIPE_KEY||"pk_test_51QtZcrKOOwUlWjVHILEHs7GLAlam1RotfVkql2yU5DrbO3kaREjIxBESz0F031oaYiryJtK4NcytwyZ447pkDJM700F9rGRKwE";M.value=Stripe(u)}catch(u){console.error("Error initializing Stripe:",u),console.error("Failed to initialize payment processor")}};return ce(b,u=>{u&&setTimeout(()=>{Q()},100)}),Oe(async()=>{const u=document.createElement("script");u.src="https://js.stripe.com/v3/",u.async=!0,u.onload=A,document.head.appendChild(u),await Promise.all([v.init(),s.fetchStripeAccount(),I()])}),Jt(()=>{L.value&&L.value.destroy()}),(u,n)=>(V(),O("div",vl,[a("div",fl,[t(re,{flat:"",bordered:"",class:"balance-card"},{default:o(()=>[t(Z,null,{default:o(()=>[a("div",gl,[a("div",null,[n[7]||(n[7]=a("div",{class:"text-subtitle1 text-grey-7"},"Available Balance",-1)),a("div",bl,R(z(qe)(z(v).getBalance)),1)]),a("div",null,[t(N,{color:"primary",label:"Cash Out","no-caps":"",disable:!x.value,to:{name:"payment-withdraw"},class:"q-ml-sm"},null,8,["disable"])])]),a("div",pl,[a("div",yl,[t(Be,{class:"bg-grey-1 rounded-borders q-pa-md"},{default:o(()=>[t(be,{avatar:""},{default:o(()=>[t(oe,{name:"payments",color:"primary",size:"md"})]),_:1}),t(be,null,{default:o(()=>[t(we,{class:"text-subtitle2"},{default:o(()=>n[8]||(n[8]=[se("Total Earnings")])),_:1}),t(we,{class:"text-h6"},{default:o(()=>[se(R(z(qe)(U.value)),1)]),_:1})]),_:1})]),_:1})]),a("div",hl,[t(Be,{class:"bg-grey-1 rounded-borders q-pa-md"},{default:o(()=>[t(be,{avatar:""},{default:o(()=>[t(oe,{name:"date_range",color:"primary",size:"md"})]),_:1}),t(be,null,{default:o(()=>[t(we,{class:"text-subtitle2"},{default:o(()=>n[9]||(n[9]=[se("This Month")])),_:1}),t(we,{class:"text-h6"},{default:o(()=>[se(R(z(qe)(z(v).getCurrentMonthTotal)),1)]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})]),t(ul,{modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=C=>c.value=C),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:o(()=>[t(Ne,{name:"payment_methods",label:"Payment Methods"}),t(Ne,{name:"transactions",label:"Transactions"}),t(Ne,{name:"bank_accounts",label:"Bank Accounts"})]),_:1},8,["modelValue"]),t(kt),t(Tt,{modelValue:c.value,"onUpdate:modelValue":n[4]||(n[4]=C=>c.value=C),animated:""},{default:o(()=>[t(je,{name:"payment_methods"},{default:o(()=>[n[16]||(n[16]=a("div",{class:"text-h6 q-mb-md"},"Payment Methods",-1)),h.value?(V(),O("div",xl,[t(ze,{color:"primary",size:"2em"}),n[10]||(n[10]=a("div",{class:"q-mt-sm"},"Loading payment methods...",-1))])):l.value.length===0?(V(),O("div",_l,[t(oe,{name:"credit_card",size:"3em",color:"grey-5"}),n[11]||(n[11]=a("div",{class:"text-h6 q-mt-md"},"No Payment Methods",-1)),n[12]||(n[12]=a("div",{class:"text-grey-7 q-mb-md"},"Add a credit card to make rentals easier",-1)),t(N,{color:"primary",label:"Add Payment Method","no-caps":"",onClick:n[1]||(n[1]=C=>b.value=!0)})])):(V(),O(_e,{key:2},[a("div",wl,[(V(!0),O(_e,null,Ie(l.value,C=>(V(),O("div",{key:C.id,class:"col-12 col-md-6"},[t(re,{bordered:"",flat:"",class:"card-item"},{default:o(()=>[t(Z,{horizontal:""},{default:o(()=>[t(Z,{class:"q-pt-xs"},{default:o(()=>[a("div",Sl,[a("div",null,[t(oe,{name:X(C.brand),size:"2em",class:"q-mr-md"},null,8,["name"])]),a("div",null,[a("div",Pl,"\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 "+R(C.last4),1),a("div",ql," Expires "+R(C.exp_month)+"/"+R(C.exp_year),1)])])]),_:2},1024),t(Z,{class:"col-auto"},{default:o(()=>[t(N,{flat:"",round:"",color:"grey-7",icon:"more_vert"},{default:o(()=>[t(va,{"auto-close":""},{default:o(()=>[t(tt,{style:{"min-width":"100px"}},{default:o(()=>[de((V(),ie(Be,{clickable:"",onClick:Pe=>le(C.id)},{default:o(()=>[t(be,null,{default:o(()=>n[13]||(n[13]=[se("Set as Default")])),_:1})]),_:2},1032,["onClick"])),[[pe]]),de((V(),ie(Be,{clickable:"",onClick:Pe=>$(C.id)},{default:o(()=>[t(be,{class:"text-negative"},{default:o(()=>n[14]||(n[14]=[se("Remove")])),_:1})]),_:2},1032,["onClick"])),[[pe]])]),_:2},1024)]),_:2},1024)]),_:2},1024),C.is_default?(V(),ie(cl,{key:0,color:"primary",class:"absolute-top-right q-mt-xs q-mr-lg"},{default:o(()=>n[15]||(n[15]=[se(" Default ")])),_:1})):Ce("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),a("div",Cl,[t(N,{outline:"",color:"primary",label:"Add New Card","no-caps":"",onClick:n[2]||(n[2]=C=>b.value=!0)})])],64))]),_:1}),t(je,{name:"transactions"},{default:o(()=>[n[20]||(n[20]=a("div",{class:"text-h6 q-mb-md"},"Transaction History",-1)),z(v).isLoading?(V(),O("div",kl,[t(ze,{color:"primary",size:"2em"}),n[17]||(n[17]=a("div",{class:"q-mt-sm"},"Loading transactions...",-1))])):z(v).getTransactions.length===0?(V(),O("div",Tl,[t(oe,{name:"receipt_long",size:"3em",color:"grey-5"}),n[18]||(n[18]=a("div",{class:"text-h6 q-mt-md"},"No Transactions Yet",-1)),n[19]||(n[19]=a("div",{class:"text-grey-7"},"Your transaction history will appear here",-1))])):(V(),O(_e,{key:2},[t(tt,{bordered:"",separator:""},{default:o(()=>[(V(!0),O(_e,null,Ie(z(v).getTransactions,C=>(V(),ie(Vt,{key:C.id,transaction:C},null,8,["transaction"]))),128))]),_:1}),a("div",Vl,[t(ml,{modelValue:Y.value,"onUpdate:modelValue":[n[3]||(n[3]=C=>Y.value=C),ne],max:z(v).pagination.totalPages,"max-pages":6,"boundary-links":"","direction-links":""},null,8,["modelValue","max"])])],64))]),_:1}),t(je,{name:"bank_accounts"},{default:o(()=>[n[27]||(n[27]=a("div",{class:"text-h6 q-mb-md"},"Bank Accounts",-1)),W.value?(V(),O("div",$l,[t(ze,{color:"primary",size:"2em"}),n[21]||(n[21]=a("div",{class:"q-mt-sm"},"Loading bank accounts...",-1))])):z(s).hasStripeAccount?z(s).isAccountVerified?(V(),O("div",Bl,[t(N,{color:"primary",label:"Manage Bank Accounts","no-caps":"",loading:z(s).isLoading,onClick:ee},null,8,["loading"]),n[26]||(n[26]=a("div",{class:"text-grey-7 q-mt-md"}," You'll be redirected to your Stripe dashboard to manage your bank accounts ",-1))])):(V(),O("div",Al,[t(oe,{name:"warning",size:"3em",color:"warning"}),n[24]||(n[24]=a("div",{class:"text-h6 q-mt-md"},"Account Verification Required",-1)),n[25]||(n[25]=a("div",{class:"text-grey-7 q-mb-md"},"Complete your Stripe account verification to manage bank accounts",-1)),t(N,{color:"warning",label:"Complete Verification","no-caps":"",loading:z(s).isLoading,onClick:w},null,8,["loading"])])):(V(),O("div",Ll,[t(oe,{name:"account_balance",size:"3em",color:"grey-5"}),n[22]||(n[22]=a("div",{class:"text-h6 q-mt-md"},"No Stripe Account",-1)),n[23]||(n[23]=a("div",{class:"text-grey-7 q-mb-md"},"Set up your Stripe account to manage bank accounts and receive payments",-1)),t(N,{color:"primary",label:"Set Up Stripe Account","no-caps":"",loading:z(s).isLoading,onClick:q},null,8,["loading"])]))]),_:1})]),_:1},8,["modelValue"]),t(Ee,{modelValue:b.value,"onUpdate:modelValue":n[5]||(n[5]=C=>b.value=C),persistent:""},{default:o(()=>[t(re,{style:{width:"500px","max-width":"90vw"}},{default:o(()=>[t(Z,{class:"row items-center"},{default:o(()=>[n[28]||(n[28]=a("div",{class:"text-h6"},"Add Payment Method",-1)),t(Xe),de(t(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[pe]])]),_:1}),t(Z,null,{default:o(()=>[a("div",{id:"card-element",ref_key:"newCardElement",ref:E,class:"q-py-md"},null,512),f.value?(V(),O("div",zl,R(f.value),1)):Ce("",!0)]),_:1}),t(et,{align:"right"},{default:o(()=>[de(t(N,{flat:"",label:"Cancel",color:"grey-7","no-caps":""},null,512),[[pe]]),t(N,{flat:"",label:"Add Card",color:"primary",loading:F.value,disable:!k.value,onClick:P,"no-caps":""},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Ee,{modelValue:m.value,"onUpdate:modelValue":n[6]||(n[6]=C=>m.value=C),persistent:""},{default:o(()=>[t(re,null,{default:o(()=>[t(Z,{class:"row items-center"},{default:o(()=>n[29]||(n[29]=[a("div",{class:"text-h6"},"Remove Payment Method",-1)])),_:1}),t(Z,null,{default:o(()=>n[30]||(n[30]=[se(" Are you sure you want to remove this payment method? This action cannot be undone. ")])),_:1}),t(et,{align:"right"},{default:o(()=>[de(t(N,{flat:"",label:"Cancel",color:"grey-7","no-caps":""},null,512),[[pe]]),t(N,{flat:"",label:"Remove",color:"negative",loading:i.value,onClick:j,"no-caps":""},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var Il=ke(El,[["__scopeId","data-v-3ca7a36a"]]);const Ml={class:"profile-page max-w-[800px] mx-auto"},Ul={class:"bg-primary p-6 text-white relative w-full rounded-b-[24px]"},Rl={class:"mx-auto"},Ql={class:"flex flex-col items-center gap-2"},Dl=["src"],Fl={class:"flex-1 text-center"},Nl={class:"flex flex-col gap-4 mb-4"},jl={class:"text-h5 q-my-none"},Ol={class:"flex gap-2 justify-center"},Wl={class:"flex justify-center gap-8 mb-4"},Hl={class:"text-center"},Kl={class:"text-h6"},Yl={class:"text-center"},Gl={class:"text-h6"},Jl={class:"text-center"},Xl={class:"text-h6"},Zl={class:"text-center"},en={class:"font-medium"},tn={class:"text-sm opacity-90"},an={class:"text-sm opacity-75"},ln={class:"max-w-4xl mx-auto p-4"},nn="https://placehold.co/200x200/eeeeee/999999?text=User",on={__name:"ProfilePage",setup(e){const v=St(),s=Xt(),c=wt(),l=S(v.currentUser),h=S(!1),b=S(!1),_=S(!1),m=S("wallet"),i=k=>oa.formatDate(k,"MMMM YYYY"),M=async()=>{try{if(!Zt()){console.warn("Cannot fetch profile: user not authenticated"),c.push("/login");return}if(v.currentUser)l.value=v.currentUser;else{console.log("No user data in store, fetching from API");const k=await v.fetchCurrentUser(!0);l.value=k}l.value&&!l.value.profile&&(console.log("User profile not fully loaded, fetching again..."),await v.fetchCurrentUser(!0),l.value=v.currentUser)}catch(k){console.error("Error fetching user profile:",k)}},K=async()=>{await M(),h.value=!1},L=()=>{_.value=!0},E=async()=>{try{await s.logout(),c.push({name:"login"})}catch(k){console.error("Error during logout:",k)}};return M(),(k,f)=>{var F,Y,W,x,U,I,Q,P,$,j,le,ne,X,q,w,ee;return V(),O("div",Ml,[a("div",Ul,[a("div",Rl,[t(N,{flat:"",round:"",color:"white",icon:"fas fa-sign-out-alt",class:"absolute top-4 left-4",onClick:L,"aria-label":"Logout"}),t(N,{flat:"",round:"",color:"white",icon:"fas fa-dollar-sign",class:"absolute top-4 right-4",onClick:f[0]||(f[0]=A=>b.value=!0)}),a("div",Ql,[t(Ze,{size:"120px",class:"shadow-lg"},{default:o(()=>{var A;return[a("img",{src:((A=l.value)==null?void 0:A.profile_picture)||nn},null,8,Dl)]}),_:1}),a("div",Fl,[a("div",Nl,[a("h2",jl,R((F=l.value)==null?void 0:F.username),1),a("div",Ol,[t(N,{outline:"","no-caps":"",color:"white",label:"Edit Profile",class:"px-6",onClick:f[1]||(f[1]=A=>h.value=!0)}),t(N,{outline:"","no-caps":"",color:"white",icon:"star",class:"px-4",label:((W=(Y=l.value)==null?void 0:Y.stats)==null?void 0:W.rating)||"0.0"},null,8,["label"])])]),a("div",Wl,[a("div",Hl,[a("div",Kl,R(((U=(x=l.value)==null?void 0:x.stats)==null?void 0:U.products_active)||0),1),f[6]||(f[6]=a("div",{class:"text-caption"},"Products",-1))]),a("div",Yl,[a("div",Gl,R(((Q=(I=l.value)==null?void 0:I.stats)==null?void 0:Q.rentals_completed)||0),1),f[7]||(f[7]=a("div",{class:"text-caption"},"Rentals",-1))]),a("div",Jl,[a("div",Xl,R((($=(P=l.value)==null?void 0:P.brands)==null?void 0:$.lended)||0),1),f[8]||(f[8]=a("div",{class:"text-caption"},"Lended",-1))])]),a("div",Zl,[a("div",en,R((j=l.value)==null?void 0:j.name),1),a("div",tn,R((ne=(le=l.value)==null?void 0:le.profile)==null?void 0:ne.city)+", "+R((q=(X=l.value)==null?void 0:X.profile)==null?void 0:q.country.name),1),a("div",an,"Joined "+R(i((w=l.value)==null?void 0:w.created_at)),1)])])])])]),a("div",ln,[t(Ba,{"user-id":(ee=l.value)==null?void 0:ee.id},null,8,["user-id"])]),t(Ee,{modelValue:h.value,"onUpdate:modelValue":f[2]||(f[2]=A=>h.value=A),maximized:"","transition-show":"slide-left","transition-hide":"slide-right"},{default:o(()=>[t(re,{class:"column"},{default:o(()=>[t(Z,{class:"row items-center q-pb-none"},{default:o(()=>[f[9]||(f[9]=a("div",{class:"text-h6"},"Edit Profile",-1)),t(Xe),de(t(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[pe]])]),_:1}),t(Z,{class:"col q-pt-none"},{default:o(()=>[t(sl,{user:l.value,onUpdate:K},null,8,["user"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Ee,{modelValue:b.value,"onUpdate:modelValue":f[3]||(f[3]=A=>b.value=A),maximized:"","transition-show":"slide-left","transition-hide":"slide-right"},{default:o(()=>[t(re,{class:"column"},{default:o(()=>[t(Z,{class:"row items-center q-pb-none"},{default:o(()=>[f[10]||(f[10]=a("div",{class:"text-h6"},"Payments & Transactions",-1)),t(Xe),de(t(N,{icon:"close",flat:"",round:"",dense:""},null,512),[[pe]])]),_:1}),t(Z,{class:"col q-pt-none"},{default:o(()=>{var A;return[t(Ka,{"user-id":(A=l.value)==null?void 0:A.id},null,8,["user-id"])]}),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Ee,{modelValue:_.value,"onUpdate:modelValue":f[4]||(f[4]=A=>_.value=A),persistent:""},{default:o(()=>[t(re,null,{default:o(()=>[t(Z,{class:"row items-center"},{default:o(()=>[t(Ze,{icon:"fas fa-sign-out-alt",color:"negative","text-color":"white"}),f[11]||(f[11]=a("span",{class:"q-ml-sm text-h6"},"Log Out",-1))]),_:1}),t(Z,null,{default:o(()=>f[12]||(f[12]=[se(" Are you sure you want to log out? You will need to login again to access your account. ")])),_:1}),t(et,{align:"right"},{default:o(()=>[de(t(N,{flat:"",label:"Cancel",color:"primary"},null,512),[[pe]]),de(t(N,{flat:"",label:"Log Out",color:"negative",onClick:E},null,512),[[pe]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Tt,{modelValue:m.value,"onUpdate:modelValue":f[5]||(f[5]=A=>m.value=A),class:"q-mt-md"},{default:o(()=>[t(Ne,{name:"wallet",label:"Wallet & Payments"}),t(je,{name:"wallet"},{default:o(()=>[t(Il)]),_:1})]),_:1},8,["modelValue"])])}}};var $n=ke(on,[["__scopeId","data-v-4dcf239a"]]);export{$n as default};
