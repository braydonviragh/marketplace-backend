import{Q as F}from"./QSkeleton.04818e3c.js";import{r as x,u as I,_ as P,c as z,o as a,a as l,d as n,F as C,e as $,n as E,f as i,g as N,t as A,Q as V,h as B,i as w,j as J,k as T,l as D,m as L,p as H,w as S,q as W,s as q,v as U,x as G,C as O}from"./index.aed2db9c.js";import{Q as M}from"./QSeparator.b9ccc7d2.js";import{Q as Y}from"./QCardActions.499540f5.js";import{u as X,P as Z,a as K,b as ee}from"./ProductSkeletonCard.3adef899.js";import"./QChip.bb92b358.js";function te(){const s=x(null),g=x(null),r=x(!1),c=I();return{coordinates:s,error:g,isLoading:r,getCurrentPosition:async()=>{var p,y;r.value=!0,g.value=null;try{const m=await new Promise((o,h)=>{navigator.geolocation.getCurrentPosition(o,h,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})});return s.value={latitude:m.coords.latitude,longitude:m.coords.longitude},s.value}catch{const o=c.currentUser;return(p=o==null?void 0:o.profile)!=null&&p.postal_code?{postal_code:o.profile.postal_code}:(y=o==null?void 0:o.profile)!=null&&y.city?{city:o.profile.city}:(g.value="No location available",null)}finally{r.value=!1}}}}const oe={class:"flex flex-nowrap overflow-x-auto gap-4 pb-3",style:{"min-width":"100%","scrollbar-width":"none","-ms-overflow-style":"none"}},se={__name:"ProductSkeletonRow",props:{count:{type:Number,default:6},width:{type:String,default:"45vw"},imageHeight:{type:String,default:"185px"},inCategoryRow:{type:Boolean,default:!0}},setup(s){const g=s,{cardWidth:r,minWidth:c}=X(g.width),d=z(()=>g.inCategoryRow?{width:r.value,minWidth:c}:{width:g.width,minWidth:"160px"});return(p,y)=>(a(),l("div",null,[n("div",oe,[(a(!0),l(C,null,$(s.count,m=>(a(),l("div",{key:`skeleton-${m}`,class:"flex-shrink-0 overflow-hidden",style:E(d.value)},[i(Z,{"image-height":s.imageHeight},null,8,["image-height"])],4))),128))])]))}};var Q=P(se,[["__scopeId","data-v-5ec76ee2"]]);const re={class:"mb-8"},ae={class:"flex justify-between items-center mb-4 px-4"},ie={class:"text-lg font-medium"},ne={key:0,class:"px-4"},le={key:1,class:"px-4"},de={class:"bg-red-50 text-red-600 p-4 rounded-lg"},ce={key:2,class:"relative"},ue={class:"flex flex-nowrap overflow-x-auto gap-4 py-2 px-4 pb-3",style:{"min-width":"100%","scrollbar-width":"none","-ms-overflow-style":"none"}},ge={key:3,class:"px-4 py-8 text-center text-gray-500"},pe={__name:"CategoryRow",props:{title:{type:String,required:!0},products:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["view-all"],setup(s,{emit:g}){const r=N(),c=I(),d=K(),p=o=>d.isFavorite(o.id),y=async o=>{try{if(!c.isAuthenticated){r.push("/login");return}await d.toggleFavorite(o.id)}catch(h){console.error("Failed to toggle favorite:",h)}},m=o=>{r.push({name:"product-details",params:{id:o.id}})};return(o,h)=>(a(),l("div",re,[n("div",ae,[n("h2",ie,A(s.title),1),i(V,{flat:"",dense:"",color:"primary",label:"View All",class:"text-sm","no-caps":"","icon-right":"chevron_right",onClick:h[0]||(h[0]=v=>o.$emit("view-all"))})]),s.loading&&s.products.length===0?(a(),l("div",ne,[i(Q,{count:6,width:"45vw","image-height":"185px","in-category-row":!0})])):s.error?(a(),l("div",le,[n("div",de,A(s.error),1)])):s.products.length>0?(a(),l("div",ce,[n("div",ue,[(a(!0),l(C,null,$(s.products,v=>(a(),B(ee,{key:v.id,product:v,"is-favorite":p(v),"is-authenticated":w(c).isAuthenticated,"fixed-width":!0,width:"45vw","image-height":"185px","in-category-row":!0,onClick:f=>m(v),onToggleFavorite:f=>y(v)},null,8,["product","is-favorite","is-authenticated","onClick","onToggleFavorite"]))),128))])])):(a(),l("div",ge," No products available in this category "))]))}};var _=P(pe,[["__scopeId","data-v-72b10b73"]]);const me={class:"category-circle w-[70px] h-[70px] rounded-full p-[2px] cursor-pointer shadow-sm bg-white border border-gray-100"},ye={class:"w-full h-full rounded-full overflow-hidden flex items-center justify-center bg-gray-50"},ve=["src","alt"],he={class:"text-xs mt-2 font-medium truncate w-[70px] text-center"},fe={__name:"CategoryCircle",props:{category:{type:Object,required:!0}},emits:["click"],setup(s,{emit:g}){const r=c=>({Dresses:"mdi-human-female",Tops:"mdi-tshirt-crew",Handbags:"mdi-bag-personal",Accessories:"mdi-glasses",Activewear:"mdi-run-fast",Blazers:"mdi-human-male",Bodysuits:"mdi-human-female",Jeans:"mdi-jeans",Jewelry:"mdi-diamond-stone",Pants:"mdi-jeans",Jumpsuits:"mdi-human-handsdown",Shoes:"mdi-shoe-heel",Shorts:"mdi-jeans-short",Skirts:"mdi-human-female","Sweats & Hoodies":"mdi-face-man-profile","Sweaters & Knits":"mdi-scarf",Suits:"mdi-tuxedo",Other:"mdi-tshirt-crew-outline"})[c]||"mdi-tshirt-crew";return(c,d)=>(a(),l("div",{class:"flex flex-col items-center flex-shrink-0",onClick:d[0]||(d[0]=p=>c.$emit("click"))},[n("div",me,[n("div",ye,[s.category.image_url?(a(),l("img",{key:0,src:s.category.image_url,alt:s.category.name,class:"object-contain max-w-[22px] max-h-[22px] w-auto h-auto"},null,8,ve)):(a(),B(J,{key:1,name:r(s.category.name),class:"text-3xl text-primary"},null,8,["name"]))])]),n("span",he,A(s.category.name),1)]))}};const _e={class:"mb-8"},we={class:"overflow-x-auto whitespace-nowrap scrollbar-hide"},xe={class:"inline-flex flex-nowrap gap-4 px-4",style:{"min-width":"max-content"}},be={__name:"CategorySlider",props:{categories:{type:Array,required:!0}},emits:["navigate"],setup(s,{emit:g}){return(r,c)=>(a(),l("div",_e,[c[0]||(c[0]=n("div",{class:"px-4 mb-4"},[n("h2",{class:"text-xl font-semibold"},"Categories")],-1)),n("div",we,[n("div",xe,[(a(!0),l(C,null,$(s.categories,d=>(a(),B(fe,{key:d.id,category:d,onClick:p=>r.$emit("navigate",d)},null,8,["category","onClick"]))),128))])])]))}};var Ce=P(be,[["__scopeId","data-v-a07ac510"]]);const $e={class:"pb-16"},Ae={key:0,class:"p-4 pt-[65px]"},Se={class:"mb-6"},ke={class:"px-4 mb-4"},Pe={class:"overflow-x-auto whitespace-nowrap scrollbar-hide"},Be={class:"inline-flex flex-nowrap gap-4 px-4",style:{"min-width":"max-content"}},Fe={class:"px-4 mb-4"},Ve={key:1,class:"fade-in"},Ie={class:"text-xl font-medium q-mb-md"},qe={class:"text-lg font-medium text-primary q-mb-sm"},Ne={class:"text-gray-700"},Qe={__name:"IndexPage",setup(s){const g=N(),r=T(),c=I(),d=D(),p=x(!0),y=x(!1),m=x({title:"",sections:[]}),o=x({dresses:{loading:!0,products:[]},topsAndBodysuits:{loading:!0,products:[]},bottomEssentials:{loading:!0,products:[]},professionalAttire:{loading:!0,products:[]},cozyAndCasual:{loading:!0,products:[]},accessoriesAndJewelry:{loading:!0,products:[]}}),h=u=>{g.push({name:"products",query:{filter:u.name.toLowerCase()}})},v=(u=null,e={})=>{const t={...e};u&&(Array.isArray(u)?t.categories=u.join(","):t.category=u),g.push({name:"products",query:t})},f=(u,e)=>{g.push({name:"products",query:{category_ids:u.join(","),section:e}})},b=async(u,e)=>{o.value[e].loading=!0;try{console.log(`Fetching products for row ${e} with category IDs: ${u}`);const t=await r.fetchProductsByCategoryIds(u);!t||t.length===0?console.log(`No products found for ${e} with categories: ${u}`):console.log(`Found ${t.length} products for ${e}`),o.value[e].products=t||[]}catch(t){console.error(`Failed to fetch products for ${e}:`,t),o.value[e].products=[]}finally{o.value[e].loading=!1}};return L(async()=>{try{await d.fetchCategories(!0)}catch(t){console.error("Failed to fetch categories:",t)}const u=[b([1],"dresses"),b([2,7],"topsAndBodysuits"),b([8,10,12],"bottomEssentials"),b([6,16],"professionalAttire"),b([14,15],"cozyAndCasual"),b([4,9],"accessoriesAndJewelry")],e=[];e.push((async()=>{try{await r.fetchProducts({filter:"trending",per_page:15})}catch(t){console.error("Failed to fetch trending products:",t)}})()),e.push((async()=>{try{const{getCurrentPosition:t}=te(),k=await t();if(k){const{latitude:R,longitude:j}=k.coords;await r.fetchNearbyProducts({latitude:R,longitude:j,radius:50})}}catch(t){console.error("Failed to fetch nearby products:",t)}})()),c.isAuthenticated&&(e.push(r.fetchTailoredProducts()),e.push(r.fetchFavoriteProducts()));try{await Promise.allSettled(u),await Promise.allSettled(e)}catch(t){console.error("Error fetching data:",t)}finally{p.value=!1}}),(u,e)=>(a(),l("div",$e,[p.value?(a(),l("div",Ae,[n("div",Se,[n("div",ke,[i(F,{type:"text",width:"200px",class:"mb-2"})]),n("div",Pe,[n("div",Be,[(a(),l(C,null,$(6,t=>i(F,{type:"circle",size:"70px",class:"flex-shrink-0",key:`story-${t}`})),64))])])]),(a(),l(C,null,$(3,t=>n("div",{key:`section-${t}`,class:"mb-8"},[n("div",Fe,[i(F,{type:"text",width:"200px"})]),i(Q,{count:5,width:"45vw","image-height":"185px","in-category-row":!0})])),64))])):(a(),l("div",Ve,[i(Ce,{categories:w(d).categories,onNavigate:h},null,8,["categories"]),i(_,{title:"Trending Now",products:w(r).trendingProducts,loading:w(r).isLoading,onViewAll:e[0]||(e[0]=t=>v())},null,8,["products","loading"]),i(_,{title:"Tops & Bodysuits",products:o.value.topsAndBodysuits.products,loading:o.value.topsAndBodysuits.loading,onViewAll:e[1]||(e[1]=t=>f([2,7],"Tops & Bodysuits"))},null,8,["products","loading"]),i(_,{title:"Bottom Essentials: Pants, Jeans & Shorts",products:o.value.bottomEssentials.products,loading:o.value.bottomEssentials.loading,onViewAll:e[2]||(e[2]=t=>f([8,10,12],"Bottom Essentials"))},null,8,["products","loading"]),i(_,{title:"Professional Attire: Blazers & Suits",products:o.value.professionalAttire.products,loading:o.value.professionalAttire.loading,onViewAll:e[3]||(e[3]=t=>f([6,16],"Professional Attire"))},null,8,["products","loading"]),i(_,{title:"Elegant Dresses",products:o.value.dresses.products,loading:o.value.dresses.loading,onViewAll:e[4]||(e[4]=t=>f([1],"Dresses"))},null,8,["products","loading"]),i(_,{title:"Cozy & Casual: Sweats & Knitwear",products:o.value.cozyAndCasual.products,loading:o.value.cozyAndCasual.loading,onViewAll:e[5]||(e[5]=t=>f([14,15],"Cozy & Casual"))},null,8,["products","loading"]),i(_,{title:"Stylish Accessories & Jewelry",products:o.value.accessoriesAndJewelry.products,loading:o.value.accessoriesAndJewelry.loading,onViewAll:e[6]||(e[6]=t=>f([4,9],"Accessories & Jewelry"))},null,8,["products","loading"]),w(r).nearbyProducts.length>0?(a(),B(_,{key:0,title:"Near You",products:w(r).nearbyProducts,loading:w(r).isLoadingNearby,error:w(r).locationError,onViewAll:e[7]||(e[7]=t=>v(null,{nearby:!0}))},null,8,["products","loading","error"])):H("",!0),i(G,{modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=t=>y.value=t),position:"bottom"},{default:S(()=>[i(W,{class:"rounded-t-lg"},{default:S(()=>[i(q,{class:"text-center"},{default:S(()=>[n("h2",Ie,A(m.value.title),1),i(V,{round:"",flat:"",color:"grey",icon:"close",class:"absolute top-2 right-2",onClick:e[8]||(e[8]=t=>y.value=!1)})]),_:1}),i(M),i(q,{class:"q-pa-md"},{default:S(()=>[(a(!0),l(C,null,$(m.value.sections,(t,k)=>(a(),l("div",{key:k,class:"q-mb-md"},[n("h3",qe,A(t.title),1),n("p",Ne,A(t.content),1)]))),128))]),_:1}),i(Y,{align:"center",class:"q-pa-md"},{default:S(()=>[U(i(V,{label:"Got it",color:"primary",flat:""},null,512),[[O]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))]))}};var De=P(Qe,[["__scopeId","data-v-a242b0ba"]]);export{De as default};
