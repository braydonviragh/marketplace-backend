import{x as M,A as p,B as T,D as qe,b4 as I,r as L,X as F,aa as ie,az as Ae,ae as Se,E as J,b5 as ue,ap as ze,aF as Ce,aU as Ve,l as ce,a0 as Ue,b0 as Te,aQ as Fe,b6 as Re,b7 as He,aS as ee,b8 as j,b9 as ke,ba as Be,_ as Ee,ab as Pe,f as $e,u as de,aC as Qe,aA as se,o as m,c as A,a as i,F as te,d as ve,g as C,w as s,h as Q,M as B,i as U,m as V,s as D,U as Ie,t as N,e as r,Q as k,k as fe,j as he,W as Ne,N as H,p as W,q as O,C as K,v as Oe,Y as pe}from"./index.fad208ab.js";import{Q as ge}from"./QInput.41d87495.js";import{Q as G}from"./QResizeObserver.5f10a6f1.js";import{Q as Y}from"./QTooltip.4faafd93.js";import{Q as X}from"./QAvatar.d9916749.js";import{Q as oe,b as E}from"./QItemLabel.2bb5d272.js";import{Q as ae}from"./QSeparator.62c942f7.js";import{Q as Le}from"./QList.f5366586.js";import{Q as De}from"./QMenu.02e0ca6a.js";import{_ as ne}from"./green-logo.2c402882.js";import{u as Me}from"./offers.6e523687.js";import{Q as re}from"./QExpansionItem.509dd23a.js";import{Q as je}from"./QCardActions.5ca72f30.js";import{u as We}from"./use-quasar.aacb3c51.js";import"./use-id.d7e26954.js";import"./private.use-form.81163b54.js";import"./selection.27bfdd36.js";import"./QSlideTransition.5153393c.js";var ye=M({name:"QToolbar",props:{inset:Boolean},setup(o,{slots:e}){const u=p(()=>"q-toolbar row no-wrap items-center"+(o.inset===!0?" q-toolbar--inset":""));return()=>T("div",{class:u.value,role:"toolbar"},qe(e.default))}}),_e=M({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(o,{slots:e,emit:u}){const{proxy:{$q:a}}=J(),t=Se(ue,I);if(t===I)return console.error("QHeader needs to be child of QLayout"),I;const v=L(parseInt(o.heightHint,10)),g=L(!0),z=p(()=>o.reveal===!0||t.view.value.indexOf("H")!==-1||a.platform.is.ios&&t.isContainer.value===!0),_=p(()=>{if(o.modelValue!==!0)return 0;if(z.value===!0)return g.value===!0?v.value:0;const c=v.value-t.scroll.value.position;return c>0?c:0}),y=p(()=>o.modelValue!==!0||z.value===!0&&g.value!==!0),P=p(()=>o.modelValue===!0&&y.value===!0&&o.reveal===!0),$=p(()=>"q-header q-layout__section--marginal "+(z.value===!0?"fixed":"absolute")+"-top"+(o.bordered===!0?" q-header--bordered":"")+(y.value===!0?" q-header--hidden":"")+(o.modelValue!==!0?" q-layout--prevent-focus":"")),h=p(()=>{const c=t.rows.value.top,x={};return c[0]==="l"&&t.left.space===!0&&(x[a.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),c[2]==="r"&&t.right.space===!0&&(x[a.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),x});function d(c,x){t.update("header",c,x)}function f(c,x){c.value!==x&&(c.value=x)}function w({height:c}){f(v,c),d("size",c)}function q(c){P.value===!0&&f(g,!0),u("focusin",c)}F(()=>o.modelValue,c=>{d("space",c),f(g,!0),t.animate()}),F(_,c=>{d("offset",c)}),F(()=>o.reveal,c=>{c===!1&&f(g,o.modelValue)}),F(g,c=>{t.animate(),u("reveal",c)}),F(t.scroll,c=>{o.reveal===!0&&f(g,c.direction==="up"||c.position<=o.revealOffset||c.position-c.inflectionPoint<100)});const b={};return t.instances.header=b,o.modelValue===!0&&d("size",v.value),d("space",o.modelValue),d("offset",_.value),ie(()=>{t.instances.header===b&&(t.instances.header=void 0,d("size",0),d("offset",0),d("space",!1))}),()=>{const c=Ae(e.default,[]);return o.elevated===!0&&c.push(T("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),c.push(T(G,{debounce:0,onResize:w})),T("header",{class:$.value,style:h.value,onFocusin:q},c)}}}),Ke=M({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(o,{slots:e,emit:u}){const{proxy:{$q:a}}=J(),t=Se(ue,I);if(t===I)return console.error("QFooter needs to be child of QLayout"),I;const v=L(parseInt(o.heightHint,10)),g=L(!0),z=L(ze.value===!0||t.isContainer.value===!0?0:window.innerHeight),_=p(()=>o.reveal===!0||t.view.value.indexOf("F")!==-1||a.platform.is.ios&&t.isContainer.value===!0),y=p(()=>t.isContainer.value===!0?t.containerHeight.value:z.value),P=p(()=>{if(o.modelValue!==!0)return 0;if(_.value===!0)return g.value===!0?v.value:0;const n=t.scroll.value.position+y.value+v.value-t.height.value;return n>0?n:0}),$=p(()=>o.modelValue!==!0||_.value===!0&&g.value!==!0),h=p(()=>o.modelValue===!0&&$.value===!0&&o.reveal===!0),d=p(()=>"q-footer q-layout__section--marginal "+(_.value===!0?"fixed":"absolute")+"-bottom"+(o.bordered===!0?" q-footer--bordered":"")+($.value===!0?" q-footer--hidden":"")+(o.modelValue!==!0?" q-layout--prevent-focus"+(_.value!==!0?" hidden":""):"")),f=p(()=>{const n=t.rows.value.bottom,S={};return n[0]==="l"&&t.left.space===!0&&(S[a.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),n[2]==="r"&&t.right.space===!0&&(S[a.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),S});function w(n,S){t.update("footer",n,S)}function q(n,S){n.value!==S&&(n.value=S)}function b({height:n}){q(v,n),w("size",n)}function c(){if(o.reveal!==!0)return;const{direction:n,position:S,inflectionPoint:R}=t.scroll.value;q(g,n==="up"||S-R<100||t.height.value-y.value-S-v.value<300)}function x(n){h.value===!0&&q(g,!0),u("focusin",n)}F(()=>o.modelValue,n=>{w("space",n),q(g,!0),t.animate()}),F(P,n=>{w("offset",n)}),F(()=>o.reveal,n=>{n===!1&&q(g,o.modelValue)}),F(g,n=>{t.animate(),u("reveal",n)}),F([v,t.scroll,t.height],c),F(()=>a.screen.height,n=>{t.isContainer.value!==!0&&q(z,n)});const l={};return t.instances.footer=l,o.modelValue===!0&&w("size",v.value),w("space",o.modelValue),w("offset",P.value),ie(()=>{t.instances.footer===l&&(t.instances.footer=void 0,w("size",0),w("offset",0),w("space",!1))}),()=>{const n=Ce(e.default,[T(G,{debounce:0,onResize:b})]);return o.elevated===!0&&n.push(T("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),T("footer",{class:d.value,style:f.value,onFocusin:x},n)}}});const{passive:be}=Fe,Ye=["both","horizontal","vertical"];var Xe=M({name:"QScrollObserver",props:{axis:{type:String,validator:o=>Ye.includes(o),default:"vertical"},debounce:[String,Number],scrollTarget:Ve},emits:["scroll"],setup(o,{emit:e}){const u={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let a=null,t,v;F(()=>o.scrollTarget,()=>{_(),z()});function g(){a!==null&&a();const $=Math.max(0,Re(t)),h=He(t),d={top:$-u.position.top,left:h-u.position.left};if(o.axis==="vertical"&&d.top===0||o.axis==="horizontal"&&d.left===0)return;const f=Math.abs(d.top)>=Math.abs(d.left)?d.top<0?"up":"down":d.left<0?"left":"right";u.position={top:$,left:h},u.directionChanged=u.direction!==f,u.delta=d,u.directionChanged===!0&&(u.direction=f,u.inflectionPoint=u.position),e("scroll",{...u})}function z(){t=Te(v,o.scrollTarget),t.addEventListener("scroll",y,be),y(!0)}function _(){t!==void 0&&(t.removeEventListener("scroll",y,be),t=void 0)}function y($){if($===!0||o.debounce===0||o.debounce==="0")g();else if(a===null){const[h,d]=o.debounce?[setTimeout(g,o.debounce),clearTimeout]:[requestAnimationFrame(g),cancelAnimationFrame];a=()=>{d(h),a=null}}}const{proxy:P}=J();return F(()=>P.$q.lang.rtl,g),ce(()=>{v=P.$el.parentNode,z()}),ie(()=>{a!==null&&a(),_()}),Object.assign(P,{trigger:y,getPosition:()=>u}),Ue}}),Ge=M({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:o=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(o.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(o,{slots:e,emit:u}){const{proxy:{$q:a}}=J(),t=L(null),v=L(a.screen.height),g=L(o.container===!0?0:a.screen.width),z=L({position:0,direction:"down",inflectionPoint:0}),_=L(0),y=L(ze.value===!0?0:ee()),P=p(()=>"q-layout q-layout--"+(o.container===!0?"containerized":"standard")),$=p(()=>o.container===!1?{minHeight:a.screen.height+"px"}:null),h=p(()=>y.value!==0?{[a.lang.rtl===!0?"left":"right"]:`${y.value}px`}:null),d=p(()=>y.value!==0?{[a.lang.rtl===!0?"right":"left"]:0,[a.lang.rtl===!0?"left":"right"]:`-${y.value}px`,width:`calc(100% + ${y.value}px)`}:null);function f(l){if(o.container===!0||document.qScrollPrevented!==!0){const n={position:l.position.top,direction:l.direction,directionChanged:l.directionChanged,inflectionPoint:l.inflectionPoint.top,delta:l.delta.top};z.value=n,o.onScroll!==void 0&&u("scroll",n)}}function w(l){const{height:n,width:S}=l;let R=!1;v.value!==n&&(R=!0,v.value=n,o.onScrollHeight!==void 0&&u("scrollHeight",n),b()),g.value!==S&&(R=!0,g.value=S),R===!0&&o.onResize!==void 0&&u("resize",l)}function q({height:l}){_.value!==l&&(_.value=l,b())}function b(){if(o.container===!0){const l=v.value>_.value?ee():0;y.value!==l&&(y.value=l)}}let c=null;const x={instances:{},view:p(()=>o.view),isContainer:p(()=>o.container),rootRef:t,height:v,containerHeight:_,scrollbarWidth:y,totalWidth:p(()=>g.value+y.value),rows:p(()=>{const l=o.view.toLowerCase().split(" ");return{top:l[0].split(""),middle:l[1].split(""),bottom:l[2].split("")}}),header:j({size:0,offset:0,space:!1}),right:j({size:300,offset:0,space:!1}),footer:j({size:0,offset:0,space:!1}),left:j({size:300,offset:0,space:!1}),scroll:z,animate(){c!==null?clearTimeout(c):document.body.classList.add("q-body--layout-animate"),c=setTimeout(()=>{c=null,document.body.classList.remove("q-body--layout-animate")},155)},update(l,n,S){x[l][n]=S}};if(Be(ue,x),ee()>0){let S=function(){l=null,n.classList.remove("hide-scrollbar")},R=function(){if(l===null){if(n.scrollHeight>a.screen.height)return;n.classList.add("hide-scrollbar")}else clearTimeout(l);l=setTimeout(S,300)},Z=function(me){l!==null&&me==="remove"&&(clearTimeout(l),S()),window[`${me}EventListener`]("resize",R)},l=null;const n=document.body;F(()=>o.container!==!0?"add":"remove",Z),o.container!==!0&&Z("add"),ke(()=>{Z("remove")})}return()=>{const l=Ce(e.default,[T(Xe,{onScroll:f}),T(G,{onResize:w})]),n=T("div",{class:P.value,style:$.value,ref:o.container===!0?void 0:t,tabindex:-1},l);return o.container===!0?T("div",{class:"q-layout-container overflow-hidden",ref:t},[T(G,{onResize:q}),T("div",{class:"absolute-full",style:h.value},[T("div",{class:"scroll",style:d.value},[n])])]):n}}});const xe=[{name:"home",label:"Home",icon:"home",to:{name:"home"},exact:!0},{name:"shop",label:"Explore",icon:"search",to:{name:"products"},exact:!1},{name:"create",label:"Post",icon:"add_box",to:{name:"create-product"},bgColor:"bg-primary",exact:!1},{name:"offers",label:"Offers",icon:"attach_money",to:{name:"offers"},exact:!1},{name:"profile",label:"Profile",icon:"person",to:{name:"profile"},exact:!1}],le="https://placehold.co/100x100/eeeeee/999999?text=User";const Je={class:"bg-white border-t border-gray-100"},Ze={class:"safe-area-bottom"},et={class:"flex justify-around items-center h-[54px]"},tt={class:"relative"},ot=["src"],rt={key:2,class:"absolute -top-1 -right-1 w-2 h-2 bg-negative rounded-full"},lt={class:"py-6 px-3 h-full flex flex-col"},st={class:"space-y-1 flex-grow"},at={class:"relative w-5 flex items-center justify-center"},nt=["src"],it={key:2,class:"absolute -top-1 -right-1 w-2 h-2 bg-negative rounded-full"},ut={class:"text-sm"},ct={key:0,class:"mt-auto border-t border-gray-100 pt-4 px-4"},dt={class:"flex items-center gap-3"},ft=["src"],ht=["src"],mt={class:"overflow-hidden"},vt={class:"font-medium text-sm truncate"},pt={class:"text-xs text-gray-500 truncate"},gt={__name:"Navigation",setup(o){const e=Pe(),u=$e(),a=de(),t=Me(),v=Qe(),g=()=>{u.push({name:"home"})},z=p(()=>(t==null?void 0:t.hasUnreadOffers)||!1),_=h=>h==="home"&&e.name==="home"||h==="shop"&&(e.name==="products"||e.path.includes("/products"))||h==="create"&&(e.name==="create-product"||e.path.includes("/create"))||h==="offers"&&(e.name==="offers"||e.path.includes("/offers"))||h==="profile"&&(e.name==="profile"||e.path.includes("/profile"))?!0:e.name===h,y=p(()=>{if(!a.currentUser||!a.currentUser.profile)return le;const h=a.currentUser.profile;if(h.profile_picture)return h.profile_picture;if(h.media&&h.media.length>0){const d=h.media.find(f=>f.is_primary)||h.media[0];return d.url||d.path}return le}),P=p(()=>!!y.value),$=async()=>{try{await v.logout(),u.push("/login")}catch(h){console.error("Logout failed:",h)}};return ce(async()=>{if(a.isAuthenticated)try{await t.fetchUnreadCount()}catch(h){console.error("Failed to fetch notification count:",h)}}),(h,d)=>{var w,q;const f=se("router-link");return m(),A(te,null,[i("div",{class:B([{hidden:h.$q.screen.gt.sm},"fixed bottom-0 left-0 right-0 z-50 w-full"])},[i("div",Je,[i("div",Ze,[i("div",et,[(m(!0),A(te,null,ve(Q(xe),b=>(m(),C(f,{key:b.name,to:b.to,class:B(["nav-link flex flex-col items-center justify-center",{"text-primary":_(b.name),"text-gray-500":!_(b.name)}])},{default:s(()=>[i("div",tt,[b.name==="profile"&&Q(a).currentUser&&P.value?(m(),C(X,{key:0,size:"22px",class:B(["border-2",_(b.name)?"border-primary":"border-transparent"])},{default:s(()=>[i("img",{src:y.value},null,8,ot)]),_:2},1032,["class"])):(m(),C(U,{key:1,name:b.icon,size:"22px"},null,8,["name"])),b.name==="offers"&&z.value&&Q(a).isAuthenticated?(m(),A("div",rt)):V("",!0)])]),_:2},1032,["to","class"]))),128))])])])],2),i("div",{class:B([{hidden:!h.$q.screen.gt.sm},"fixed left-0 top-0 bottom-0 w-[220px] bg-white shadow-md z-40 pt-[60px]"])},[i("div",lt,[i("div",{class:"px-4 mb-8 cursor-pointer",onClick:g},d[0]||(d[0]=[i("img",{src:ne,alt:"Spindle Logo",class:"h-8 object-contain mb-1"},null,-1),i("p",{class:"text-xs text-gray-500"},"share your style",-1)])),i("div",st,[(m(!0),A(te,null,ve(Q(xe),b=>D((m(),C(f,{key:b.name,to:b.to,exact:b.exact,class:B(["sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors no-underline",{"bg-primary-light bg-opacity-10 text-primary":_(b.name),"text-gray-600 hover:bg-gray-50":!_(b.name)}])},{default:s(()=>[i("div",at,[b.name==="profile"&&Q(a).currentUser&&P.value?(m(),C(X,{key:0,size:"20px"},{default:s(()=>[i("img",{src:y.value},null,8,nt)]),_:1})):(m(),C(U,{key:1,name:b.icon,size:"20px"},null,8,["name"])),b.name==="offers"&&z.value&&Q(a).isAuthenticated?(m(),A("div",it)):V("",!0)]),i("span",ut,N(b.label),1)]),_:2},1032,["to","exact","class"])),[[Ie]])),128))]),Q(a).isAuthenticated?(m(),A("div",ct,[i("div",dt,[r(X,{size:"32px"},{default:s(()=>[P.value?(m(),A("img",{key:0,src:y.value},null,8,ft)):(m(),A("img",{key:1,src:Q(le)},null,8,ht))]),_:1}),i("div",mt,[i("div",vt,N(((w=Q(a).currentUser)==null?void 0:w.name)||"User"),1),i("div",pt,N((q=Q(a).currentUser)==null?void 0:q.email),1)])]),r(k,{flat:"",color:"primary",label:"Log out",class:"w-full mt-4 text-sm",onClick:$,"no-caps":""})])):V("",!0)])],2)],64)}}};var we=Ee(gt,[["__scopeId","data-v-61d65414"]]);async function yt(o={}){const e=fe(),u=he(),a=Ne();try{if(typeof a.clearAllFilters=="function"&&a.clearAllFilters(),typeof e.resetStore=="function")e.resetStore();else if(typeof e.clearStore=="function")e.clearStore();else{console.log("No reset method found on categoryStore, performing manual reset");try{e.categories=[],e.currentCategory=null,e.brands=[],e.colors=[],e.sizes={letter:[],number:[],waist:[],shoe:[]},e.isLoading=!1,e.error=null}catch(t){console.error("Error during manual reset:",t)}}typeof u.clearCache=="function"?u.clearCache():console.log("Product store does not have clearCache method, skipping"),await Promise.all([e.fetchCategories(!0),e.fetchAllBrands?e.fetchAllBrands(!0):Promise.resolve(),e.fetchAllColors?e.fetchAllColors(!0):Promise.resolve(),e.fetchLetterSizes?e.fetchLetterSizes(!0):Promise.resolve(),e.fetchNumberSizes?e.fetchNumberSizes(!0):Promise.resolve(),e.fetchWaistSizes?e.fetchWaistSizes(!0):Promise.resolve(),e.fetchShoeSizes?e.fetchShoeSizes(!0):Promise.resolve()]),u.fetchProducts&&await u.fetchProducts({forceRefresh:!0}),console.log("All caches refreshed successfully")}catch(t){throw console.error("Failed to refresh caches:",t),t}}async function _t(o={}){const e=fe(),u=he();try{return console.log("Starting direct cache refresh"),console.log("Clearing category store data"),e.$patch({categories:[],currentCategory:null,brands:[],colors:[],sizes:{letter:[],number:[],waist:[],shoe:[]},isLoading:!1,error:null}),console.log("Fetching fresh category data"),await e.fetchCategories(!0),u&&(console.log("Fetching fresh product data"),await u.fetchProducts({forceRefresh:!0})),console.log("Cache refresh completed successfully"),!0}catch(a){return console.error("Direct refresh failed:",a),!1}}const bt={class:"row q-col-gutter-sm"},xt={class:"col-12"},wt={class:"col-12 col-sm-6"},St={class:"col-12 col-sm-6"},zt={class:"row q-col-gutter-sm"},Ct={class:"col-12"},kt={class:"row q-col-gutter-sm"},Pt={class:"col-12"},$t={class:"text-body2"},Qt={class:"col-12"},Lt={class:"text-body2"},qt={class:"col-12"},At={class:"text-body2"},Vt={__name:"DevTools",setup(o){We();const e=fe(),u=he();de();const a=L(!1),t=L(!1),v=p(()=>!1),g=p(()=>({}).APP_VERSION||"Development"),z=p(()=>"production"),_=p(()=>({}).API_URL||"Unknown"),y=async()=>{try{t.value=!0,await _t({})||await yt({})}catch(d){console.error("Failed to refresh all data:",d)}finally{t.value=!1}},P=async()=>{try{typeof e.resetStore=="function"?e.resetStore():(e.categories=[],e.currentCategory=null,e.brands=[],e.colors=[],e.sizes={letter:[],number:[],waist:[],shoe:[]},e.isLoading=!1,e.error=null),await Promise.all([e.fetchCategories(!0),e.fetchAllBrands(!0),e.fetchAllColors(!0),e.fetchLetterSizes(!0),e.fetchNumberSizes(!0),e.fetchWaistSizes(!0),e.fetchShoeSizes(!0)]),console.log("Categories refreshed successfully!")}catch(d){console.error("Failed to refresh categories:",d)}},$=async()=>{try{u.clearCache(),await u.fetchProducts({forceRefresh:!0}),console.log("Products refreshed successfully!")}catch(d){console.error("Failed to refresh products:",d)}},h=()=>{try{localStorage.removeItem("user_token"),localStorage.removeItem("pinia-user"),console.log("User session cleared. Please log in again."),setTimeout(()=>{window.location.reload()},1500)}catch(d){console.error("Failed to clear user session:",d)}};return(d,f)=>(m(),A("div",null,[v.value?(m(),C(k,{key:0,round:"",color:"purple",icon:"developer_mode",class:"fixed bottom-[150px] right-4 z-50 opacity-70 hover:opacity-100 transition-opacity shadow-lg",size:"sm",onClick:f[0]||(f[0]=w=>a.value=!0)},{default:s(()=>[r(Y,null,{default:s(()=>f[2]||(f[2]=[H("Developer Tools")])),_:1})]),_:1})):V("",!0),r(Oe,{modelValue:a.value,"onUpdate:modelValue":f[1]||(f[1]=w=>a.value=w),position:"right"},{default:s(()=>[r(W,{style:{"min-width":"350px"}},{default:s(()=>[r(O,{class:"bg-purple text-white"},{default:s(()=>f[3]||(f[3]=[i("div",{class:"text-h6"},"Developer Tools",-1)])),_:1}),r(ae),r(O,{class:"q-pa-none"},{default:s(()=>[r(Le,null,{default:s(()=>[r(re,{group:"dev-tools",icon:"cached",label:"Cache Management","header-class":"text-purple","expand-separator":"","default-opened":""},{default:s(()=>[r(W,null,{default:s(()=>[r(O,null,{default:s(()=>[f[4]||(f[4]=i("p",{class:"text-caption q-mb-sm"}," Use these tools to clear cached data and refresh from the server. This is useful after database migrations or when making changes to API responses. ",-1)),i("div",bt,[i("div",xt,[r(k,{label:"Refresh All Caches",icon:"refresh",color:"primary",class:"w-full",loading:t.value,onClick:y},null,8,["loading"])]),i("div",wt,[r(k,{label:"Categories",icon:"category",color:"purple",outline:"",class:"w-full",onClick:P})]),i("div",St,[r(k,{label:"Products",icon:"inventory_2",color:"purple",outline:"",class:"w-full",onClick:$})])])]),_:1})]),_:1})]),_:1}),r(re,{group:"dev-tools",icon:"account_circle",label:"User Session","header-class":"text-purple","expand-separator":""},{default:s(()=>[r(W,null,{default:s(()=>[r(O,null,{default:s(()=>[i("div",zt,[i("div",Ct,[r(k,{label:"Clear User Data",icon:"delete",color:"negative",outline:"",class:"w-full",onClick:h})])])]),_:1})]),_:1})]),_:1}),r(re,{group:"dev-tools",icon:"info",label:"App Information","header-class":"text-purple","expand-separator":""},{default:s(()=>[r(W,null,{default:s(()=>[r(O,null,{default:s(()=>[i("div",kt,[i("div",Pt,[f[5]||(f[5]=i("div",{class:"text-caption q-mb-xs"},"App Version",-1)),i("div",$t,N(g.value),1)]),i("div",Qt,[f[6]||(f[6]=i("div",{class:"text-caption q-mb-xs"},"Environment",-1)),i("div",Lt,N(z.value),1)]),i("div",qt,[f[7]||(f[7]=i("div",{class:"text-caption q-mb-xs"},"API URL",-1)),i("div",At,N(_.value),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(ae),r(je,{align:"right"},{default:s(()=>[D(r(k,{flat:"",label:"Close",color:"purple"},null,512),[[K]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const Ut={class:"flex items-center gap-3"},Tt={key:0,class:"absolute -top-1 -right-1 w-2 h-2 bg-negative rounded-full"},Ft={key:0,class:"px-4 py-2 border-t border-gray-100 bg-white"},Rt={key:0,class:"flex-grow mx-8 max-w-md"},Ht={class:"flex items-center gap-3"},Bt={key:0,class:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-negative rounded-full"},Et={key:2},It=["src"],Nt={key:3,class:"flex gap-2"},Ot={class:"pb-[70px] lg:pb-0 lg:pl-[220px] transition-all duration-300 pt-2"},io={__name:"MainLayout",setup(o){const e=$e(),u=Pe(),a=de(),t=Qe(),v=L(""),g=L(!1),z=L(!1),_=L(!1),y=["home","products","products-list"],P=p(()=>y.includes(u.name)),$=()=>{_.value=!_.value},h=p(()=>{if(!a.currentUser||!a.currentUser.profile)return null;const x=a.currentUser.profile;if(x.profile_picture)return x.profile_picture;if(x.media&&x.media.length>0){const l=x.media.find(n=>n.is_primary)||x.media[0];return l.url||l.path}return null}),d=p(()=>!!h.value),f=()=>{e.push({name:"home"})},w=async()=>{try{await t.logout(),e.push("/login")}catch(x){console.error("Logout failed:",x)}},q=()=>{!v.value.trim()||(e.push({name:"products",query:{q:v.value.trim()}}),_.value=!1)},b=()=>{window.scrollTo({top:0,behavior:"smooth"})},c=()=>{g.value=window.scrollY>500};return ce(()=>{window.addEventListener("scroll",c)}),ke(()=>{window.removeEventListener("scroll",c)}),(x,l)=>{const n=se("router-link"),S=se("router-view");return m(),C(Ge,{view:"lHh lpR lFf",class:"bg-background-primary"},{default:s(()=>[r(_e,{bordered:"",class:B(["bg-white text-primary shadow-sm z-50",{hidden:x.$q.screen.gt.sm}]),style:{"backdrop-filter":"none",position:"sticky",top:"0"}},{default:s(()=>[r(ye,{class:"min-h-[56px] justify-between px-4"},{default:s(()=>[i("div",{class:"cursor-pointer",onClick:f},l[4]||(l[4]=[i("img",{src:ne,alt:"Spindle Logo",class:"h-7 object-contain"},null,-1)])),i("div",Ut,[P.value&&Q(u).name==="home"?(m(),C(k,{key:0,round:"",flat:"",color:"primary",size:"sm",onClick:$},{default:s(()=>[r(U,{name:"search",size:"sm"})]),_:1})):V("",!0),Q(a).isAuthenticated?(m(),C(k,{key:1,round:"",flat:"",color:"primary",size:"sm",class:"relative"},{default:s(()=>[r(U,{name:"notifications",size:"sm"}),z.value?(m(),A("div",Tt)):V("",!0)]),_:1})):V("",!0),Q(a).isAuthenticated?(m(),C(k,{key:2,round:"",flat:"",color:"primary",size:"sm",to:"/messages"},{default:s(()=>[r(U,{name:"chat_bubble_outline",size:"sm"})]),_:1})):V("",!0)])]),_:1}),_.value?(m(),A("div",Ft,[r(ge,{modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=R=>v.value=R),dense:"",filled:"",placeholder:"Search for clothes...",class:"bg-gray-50 rounded-full","bg-color":"grey-1",onKeyup:pe(q,["enter"])},{prepend:s(()=>[r(U,{name:"search"})]),append:s(()=>[v.value?(m(),C(k,{key:0,icon:"close",flat:"",round:"",dense:"",onClick:l[0]||(l[0]=R=>v.value="")})):V("",!0)]),_:1},8,["modelValue"])])):V("",!0)]),_:1},8,["class"]),r(_e,{bordered:"",class:"bg-white text-primary w-full shadow-sm hidden lg:block z-50",style:{"backdrop-filter":"none",position:"sticky",top:"0"}},{default:s(()=>[r(ye,{class:"min-h-[60px] justify-between container mx-auto px-4"},{default:s(()=>[i("div",{class:"cursor-pointer",onClick:f},l[5]||(l[5]=[i("img",{src:ne,alt:"Spindle Logo",class:"h-8 object-contain"},null,-1)])),Q(u).name==="home"?(m(),A("div",Rt,[r(ge,{dense:"",outlined:"",modelValue:v.value,"onUpdate:modelValue":l[3]||(l[3]=R=>v.value=R),placeholder:"Search for clothes...",class:"bg-gray-50 rounded-full",onKeyup:pe(q,["enter"])},{prepend:s(()=>[r(U,{name:"search"})]),append:s(()=>[v.value?(m(),C(k,{key:0,icon:"close",flat:"",round:"",dense:"",onClick:l[2]||(l[2]=R=>v.value="")})):V("",!0)]),_:1},8,["modelValue"])])):V("",!0),i("div",Ht,[Q(a).isAuthenticated?(m(),C(k,{key:0,round:"",flat:"",color:"primary",size:"sm",class:"relative"},{default:s(()=>[r(U,{name:"notifications"}),z.value?(m(),A("div",Bt)):V("",!0),r(Y,null,{default:s(()=>l[6]||(l[6]=[H("Notifications")])),_:1})]),_:1})):V("",!0),Q(a).isAuthenticated?(m(),C(k,{key:1,round:"",flat:"",color:"primary",size:"sm",to:"/messages"},{default:s(()=>[r(U,{name:"chat_bubble_outline"}),r(Y,null,{default:s(()=>l[7]||(l[7]=[H("Messages")])),_:1})]),_:1})):V("",!0),r(k,{round:"",flat:"",color:"primary",size:"sm"},{default:s(()=>[r(U,{name:"help_outline"}),r(Y,null,{default:s(()=>l[8]||(l[8]=[H("Help & Info")])),_:1})]),_:1}),Q(a).isAuthenticated?(m(),A("div",Et,[r(k,{round:"",flat:""},{default:s(()=>[r(X,{size:"30px"},{default:s(()=>[d.value?(m(),A("img",{key:0,src:h.value},null,8,It)):(m(),C(U,{key:1,name:"person",class:"text-gray-400"}))]),_:1}),r(De,{anchor:"bottom right",self:"top right",class:"bg-white rounded-lg shadow-lg"},{default:s(()=>[r(Le,{style:{"min-width":"200px"}},{default:s(()=>[D((m(),C(oe,{clickable:"",to:"/profile"},{default:s(()=>[r(E,{avatar:""},{default:s(()=>[r(U,{name:"person",color:"primary"})]),_:1}),r(E,null,{default:s(()=>l[9]||(l[9]=[H("Profile")])),_:1})]),_:1})),[[K]]),D((m(),C(oe,{clickable:"",to:"/settings"},{default:s(()=>[r(E,{avatar:""},{default:s(()=>[r(U,{name:"settings",color:"primary"})]),_:1}),r(E,null,{default:s(()=>l[10]||(l[10]=[H("Settings")])),_:1})]),_:1})),[[K]]),r(ae),D((m(),C(oe,{clickable:"",onClick:w},{default:s(()=>[r(E,{avatar:""},{default:s(()=>[r(U,{name:"logout",color:"negative"})]),_:1}),r(E,null,{default:s(()=>l[11]||(l[11]=[H("Logout")])),_:1})]),_:1})),[[K]])]),_:1})]),_:1})]),_:1})])):(m(),A("div",Nt,[r(n,{to:"/login"},{default:s(()=>[r(k,{outline:"",color:"primary",label:"Login",class:"text-sm","no-caps":""})]),_:1}),r(n,{to:"/register"},{default:s(()=>[r(k,{unelevated:"",color:"primary",label:"Sign Up",class:"text-sm","no-caps":""})]),_:1})]))])]),_:1})]),_:1}),i("div",Ot,[r(S,{class:"animate-fade-in"}),i("div",{class:B(["fixed bottom-[80px] right-[18px] z-50",{hidden:!g.value}])},[r(k,{round:"",color:"secondary",icon:"keyboard_arrow_up",onClick:b,class:"shadow-lg btn-hover-effect",size:"md"})],2)]),r(Ke,{bordered:"",class:"lg:hidden bg-white z-50 shadow-up"},{default:s(()=>[r(we)]),_:1}),r(we),r(Vt)]),_:1})}}};export{io as default};
