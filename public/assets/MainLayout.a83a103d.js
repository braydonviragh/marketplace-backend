import{x as M,A as g,B as T,D as qe,b5 as I,r as Q,Y as U,ab as ie,aA as Ve,af as Se,E as Z,b6 as ue,aq as ze,aG as Ce,aV as Ae,l as ce,a1 as Te,b1 as Ue,aR as Re,b7 as Fe,b8 as He,aT as ee,b9 as j,L as ke,ba as Be,_ as Ee,ac as Pe,g as $e,u as de,aD as Qe,aB as se,o as p,c as V,a as i,F as te,d as ve,h as k,w as s,e as q,N as B,i as R,m as A,s as N,V as Ie,t as O,f as l,Q as P,k as fe,j as he,X as Oe,O as H,p as W,q as D,C as K,v as De,Z as pe}from"./index.c533f99f.js";import{Q as ge}from"./QInput.be86d520.js";import{Q as X}from"./QResizeObserver.94d55812.js";import{Q as Y}from"./QTooltip.1a20c91c.js";import{Q as G}from"./QAvatar.55704798.js";import{Q as oe,b as E}from"./QItemLabel.d261921f.js";import{Q as ae}from"./QSeparator.c5a25909.js";import{Q as Le}from"./QList.18febcbe.js";import{Q as Ne}from"./QMenu.b2ec819b.js";import{_ as ne}from"./green-logo.2c402882.js";import{u as Me}from"./offers.635819da.js";import{Q as re}from"./QExpansionItem.a21df118.js";import{Q as je}from"./QCardActions.d8fc215a.js";import{u as We}from"./use-quasar.22bfa1f7.js";import"./use-id.c9ffd3a4.js";import"./private.use-form.35f2d056.js";import"./selection.4b85802c.js";import"./QSlideTransition.1871efd3.js";var ye=M({name:"QToolbar",props:{inset:Boolean},setup(o,{slots:e}){const u=g(()=>"q-toolbar row no-wrap items-center"+(o.inset===!0?" q-toolbar--inset":""));return()=>T("div",{class:u.value,role:"toolbar"},qe(e.default))}}),_e=M({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(o,{slots:e,emit:u}){const{proxy:{$q:a}}=Z(),t=Se(ue,I);if(t===I)return console.error("QHeader needs to be child of QLayout"),I;const m=Q(parseInt(o.heightHint,10)),y=Q(!0),w=g(()=>o.reveal===!0||t.view.value.indexOf("H")!==-1||a.platform.is.ios&&t.isContainer.value===!0),b=g(()=>{if(o.modelValue!==!0)return 0;if(w.value===!0)return y.value===!0?m.value:0;const r=m.value-t.scroll.value.position;return r>0?r:0}),_=g(()=>o.modelValue!==!0||w.value===!0&&y.value!==!0),S=g(()=>o.modelValue===!0&&_.value===!0&&o.reveal===!0),$=g(()=>"q-header q-layout__section--marginal "+(w.value===!0?"fixed":"absolute")+"-top"+(o.bordered===!0?" q-header--bordered":"")+(_.value===!0?" q-header--hidden":"")+(o.modelValue!==!0?" q-layout--prevent-focus":"")),h=g(()=>{const r=t.rows.value.top,C={};return r[0]==="l"&&t.left.space===!0&&(C[a.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),r[2]==="r"&&t.right.space===!0&&(C[a.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),C});function c(r,C){t.update("header",r,C)}function d(r,C){r.value!==C&&(r.value=C)}function x({height:r}){d(m,r),c("size",r)}function L(r){S.value===!0&&d(y,!0),u("focusin",r)}U(()=>o.modelValue,r=>{c("space",r),d(y,!0),t.animate()}),U(b,r=>{c("offset",r)}),U(()=>o.reveal,r=>{r===!1&&d(y,o.modelValue)}),U(y,r=>{t.animate(),u("reveal",r)}),U(t.scroll,r=>{o.reveal===!0&&d(y,r.direction==="up"||r.position<=o.revealOffset||r.position-r.inflectionPoint<100)});const f={};return t.instances.header=f,o.modelValue===!0&&c("size",m.value),c("space",o.modelValue),c("offset",b.value),ie(()=>{t.instances.header===f&&(t.instances.header=void 0,c("size",0),c("offset",0),c("space",!1))}),()=>{const r=Ve(e.default,[]);return o.elevated===!0&&r.push(T("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),r.push(T(X,{debounce:0,onResize:x})),T("header",{class:$.value,style:h.value,onFocusin:L},r)}}}),Ke=M({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(o,{slots:e,emit:u}){const{proxy:{$q:a}}=Z(),t=Se(ue,I);if(t===I)return console.error("QFooter needs to be child of QLayout"),I;const m=Q(parseInt(o.heightHint,10)),y=Q(!0),w=Q(ze.value===!0||t.isContainer.value===!0?0:window.innerHeight),b=g(()=>o.reveal===!0||t.view.value.indexOf("F")!==-1||a.platform.is.ios&&t.isContainer.value===!0),_=g(()=>t.isContainer.value===!0?t.containerHeight.value:w.value),S=g(()=>{if(o.modelValue!==!0)return 0;if(b.value===!0)return y.value===!0?m.value:0;const n=t.scroll.value.position+_.value+m.value-t.height.value;return n>0?n:0}),$=g(()=>o.modelValue!==!0||b.value===!0&&y.value!==!0),h=g(()=>o.modelValue===!0&&$.value===!0&&o.reveal===!0),c=g(()=>"q-footer q-layout__section--marginal "+(b.value===!0?"fixed":"absolute")+"-bottom"+(o.bordered===!0?" q-footer--bordered":"")+($.value===!0?" q-footer--hidden":"")+(o.modelValue!==!0?" q-layout--prevent-focus"+(b.value!==!0?" hidden":""):"")),d=g(()=>{const n=t.rows.value.bottom,z={};return n[0]==="l"&&t.left.space===!0&&(z[a.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),n[2]==="r"&&t.right.space===!0&&(z[a.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),z});function x(n,z){t.update("footer",n,z)}function L(n,z){n.value!==z&&(n.value=z)}function f({height:n}){L(m,n),x("size",n)}function r(){if(o.reveal!==!0)return;const{direction:n,position:z,inflectionPoint:F}=t.scroll.value;L(y,n==="up"||z-F<100||t.height.value-_.value-z-m.value<300)}function C(n){h.value===!0&&L(y,!0),u("focusin",n)}U(()=>o.modelValue,n=>{x("space",n),L(y,!0),t.animate()}),U(S,n=>{x("offset",n)}),U(()=>o.reveal,n=>{n===!1&&L(y,o.modelValue)}),U(y,n=>{t.animate(),u("reveal",n)}),U([m,t.scroll,t.height],r),U(()=>a.screen.height,n=>{t.isContainer.value!==!0&&L(w,n)});const v={};return t.instances.footer=v,o.modelValue===!0&&x("size",m.value),x("space",o.modelValue),x("offset",S.value),ie(()=>{t.instances.footer===v&&(t.instances.footer=void 0,x("size",0),x("offset",0),x("space",!1))}),()=>{const n=Ce(e.default,[T(X,{debounce:0,onResize:f})]);return o.elevated===!0&&n.push(T("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),T("footer",{class:c.value,style:d.value,onFocusin:C},n)}}});const{passive:be}=Re,Ye=["both","horizontal","vertical"];var Ge=M({name:"QScrollObserver",props:{axis:{type:String,validator:o=>Ye.includes(o),default:"vertical"},debounce:[String,Number],scrollTarget:Ae},emits:["scroll"],setup(o,{emit:e}){const u={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let a=null,t,m;U(()=>o.scrollTarget,()=>{b(),w()});function y(){a!==null&&a();const $=Math.max(0,Fe(t)),h=He(t),c={top:$-u.position.top,left:h-u.position.left};if(o.axis==="vertical"&&c.top===0||o.axis==="horizontal"&&c.left===0)return;const d=Math.abs(c.top)>=Math.abs(c.left)?c.top<0?"up":"down":c.left<0?"left":"right";u.position={top:$,left:h},u.directionChanged=u.direction!==d,u.delta=c,u.directionChanged===!0&&(u.direction=d,u.inflectionPoint=u.position),e("scroll",{...u})}function w(){t=Ue(m,o.scrollTarget),t.addEventListener("scroll",_,be),_(!0)}function b(){t!==void 0&&(t.removeEventListener("scroll",_,be),t=void 0)}function _($){if($===!0||o.debounce===0||o.debounce==="0")y();else if(a===null){const[h,c]=o.debounce?[setTimeout(y,o.debounce),clearTimeout]:[requestAnimationFrame(y),cancelAnimationFrame];a=()=>{c(h),a=null}}}const{proxy:S}=Z();return U(()=>S.$q.lang.rtl,y),ce(()=>{m=S.$el.parentNode,w()}),ie(()=>{a!==null&&a(),b()}),Object.assign(S,{trigger:_,getPosition:()=>u}),Te}}),Xe=M({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:o=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(o.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(o,{slots:e,emit:u}){const{proxy:{$q:a}}=Z(),t=Q(null),m=Q(a.screen.height),y=Q(o.container===!0?0:a.screen.width),w=Q({position:0,direction:"down",inflectionPoint:0}),b=Q(0),_=Q(ze.value===!0?0:ee()),S=g(()=>"q-layout q-layout--"+(o.container===!0?"containerized":"standard")),$=g(()=>o.container===!1?{minHeight:a.screen.height+"px"}:null),h=g(()=>_.value!==0?{[a.lang.rtl===!0?"left":"right"]:`${_.value}px`}:null),c=g(()=>_.value!==0?{[a.lang.rtl===!0?"right":"left"]:0,[a.lang.rtl===!0?"left":"right"]:`-${_.value}px`,width:`calc(100% + ${_.value}px)`}:null);function d(v){if(o.container===!0||document.qScrollPrevented!==!0){const n={position:v.position.top,direction:v.direction,directionChanged:v.directionChanged,inflectionPoint:v.inflectionPoint.top,delta:v.delta.top};w.value=n,o.onScroll!==void 0&&u("scroll",n)}}function x(v){const{height:n,width:z}=v;let F=!1;m.value!==n&&(F=!0,m.value=n,o.onScrollHeight!==void 0&&u("scrollHeight",n),f()),y.value!==z&&(F=!0,y.value=z),F===!0&&o.onResize!==void 0&&u("resize",v)}function L({height:v}){b.value!==v&&(b.value=v,f())}function f(){if(o.container===!0){const v=m.value>b.value?ee():0;_.value!==v&&(_.value=v)}}let r=null;const C={instances:{},view:g(()=>o.view),isContainer:g(()=>o.container),rootRef:t,height:m,containerHeight:b,scrollbarWidth:_,totalWidth:g(()=>y.value+_.value),rows:g(()=>{const v=o.view.toLowerCase().split(" ");return{top:v[0].split(""),middle:v[1].split(""),bottom:v[2].split("")}}),header:j({size:0,offset:0,space:!1}),right:j({size:300,offset:0,space:!1}),footer:j({size:0,offset:0,space:!1}),left:j({size:300,offset:0,space:!1}),scroll:w,animate(){r!==null?clearTimeout(r):document.body.classList.add("q-body--layout-animate"),r=setTimeout(()=>{r=null,document.body.classList.remove("q-body--layout-animate")},155)},update(v,n,z){C[v][n]=z}};if(Be(ue,C),ee()>0){let z=function(){v=null,n.classList.remove("hide-scrollbar")},F=function(){if(v===null){if(n.scrollHeight>a.screen.height)return;n.classList.add("hide-scrollbar")}else clearTimeout(v);v=setTimeout(z,300)},J=function(me){v!==null&&me==="remove"&&(clearTimeout(v),z()),window[`${me}EventListener`]("resize",F)},v=null;const n=document.body;U(()=>o.container!==!0?"add":"remove",J),o.container!==!0&&J("add"),ke(()=>{J("remove")})}return()=>{const v=Ce(e.default,[T(Ge,{onScroll:d}),T(X,{onResize:x})]),n=T("div",{class:S.value,style:$.value,ref:o.container===!0?void 0:t,tabindex:-1},v);return o.container===!0?T("div",{class:"q-layout-container overflow-hidden",ref:t},[T(X,{onResize:L}),T("div",{class:"absolute-full",style:h.value},[T("div",{class:"scroll",style:c.value},[n])])]):n}}});const xe=[{name:"home",label:"Home",icon:"home",to:{name:"home"},exact:!0},{name:"shop",label:"Explore",icon:"search",to:{name:"products"},exact:!1},{name:"create",label:"Post",icon:"add_box",to:{name:"create-product"},bgColor:"bg-primary",exact:!1},{name:"offers",label:"Offers",icon:"attach_money",to:{name:"offers"},exact:!1},{name:"profile",label:"Profile",icon:"person",to:{name:"profile"},exact:!1}],le="https://placehold.co/100x100/eeeeee/999999?text=User";const Ze={class:"bg-white border-t border-gray-100"},Je={class:"safe-area-bottom"},et={class:"flex justify-around items-center h-[54px]"},tt={class:"relative"},ot=["src"],rt={key:2,class:"absolute -top-1 -right-1 w-2 h-2 bg-negative rounded-full"},lt={class:"py-6 px-3 h-full flex flex-col"},st={class:"space-y-1 flex-grow"},at={class:"relative w-5 flex items-center justify-center"},nt=["src"],it={key:2,class:"absolute -top-1 -right-1 w-2 h-2 bg-negative rounded-full"},ut={class:"text-sm"},ct={key:0,class:"mt-auto border-t border-gray-100 pt-4 px-4"},dt={class:"flex items-center gap-3"},ft=["src"],ht=["src"],mt={class:"overflow-hidden"},vt={class:"font-medium text-sm truncate"},pt={class:"text-xs text-gray-500 truncate"},gt={__name:"Navigation",setup(o){const e=Pe(),u=$e(),a=de(),t=Me(),m=Qe(),y=()=>{u.push({name:"home"})},w=g(()=>(t==null?void 0:t.hasUnreadOffers)||!1),b=h=>h==="home"&&e.name==="home"||h==="shop"&&(e.name==="products"||e.path.includes("/products"))||h==="create"&&(e.name==="create-product"||e.path.includes("/create"))||h==="offers"&&(e.name==="offers"||e.path.includes("/offers"))||h==="profile"&&(e.name==="profile"||e.path.includes("/profile"))?!0:e.name===h,_=g(()=>{if(!a.currentUser||!a.currentUser.profile)return le;const h=a.currentUser.profile;if(h.profile_picture)return h.profile_picture;if(h.media&&h.media.length>0){const c=h.media.find(d=>d.is_primary)||h.media[0];return c.url||c.path}return le}),S=g(()=>!!_.value),$=async()=>{try{await m.logout(),u.push("/login")}catch(h){console.error("Logout failed:",h)}};return ce(async()=>{if(a.isAuthenticated)try{await t.fetchUnreadCount()}catch(h){console.error("Failed to fetch notification count:",h)}}),(h,c)=>{var x,L;const d=se("router-link");return p(),V(te,null,[i("div",{class:B([{hidden:h.$q.screen.gt.sm},"fixed bottom-0 left-0 right-0 z-50 w-full"])},[i("div",Ze,[i("div",Je,[i("div",et,[(p(!0),V(te,null,ve(q(xe),f=>(p(),k(d,{key:f.name,to:f.to,class:B(["nav-link flex flex-col items-center justify-center",{"text-primary":b(f.name),"text-gray-500":!b(f.name)}])},{default:s(()=>[i("div",tt,[f.name==="profile"&&q(a).currentUser&&S.value?(p(),k(G,{key:0,size:"22px",class:B(["border-2",b(f.name)?"border-primary":"border-transparent"])},{default:s(()=>[i("img",{src:_.value},null,8,ot)]),_:2},1032,["class"])):(p(),k(R,{key:1,name:f.icon,size:"22px"},null,8,["name"])),f.name==="offers"&&w.value&&q(a).isAuthenticated?(p(),V("div",rt)):A("",!0)])]),_:2},1032,["to","class"]))),128))])])])],2),i("div",{class:B([{hidden:!h.$q.screen.gt.sm},"fixed left-0 top-0 bottom-0 w-[220px] bg-white shadow-md z-40 pt-[60px]"])},[i("div",lt,[i("div",{class:"px-4 mb-8 cursor-pointer",onClick:y},c[0]||(c[0]=[i("img",{src:ne,alt:"Spindle Logo",class:"h-8 object-contain mb-1"},null,-1),i("p",{class:"text-xs text-gray-500"},"share your style",-1)])),i("div",st,[(p(!0),V(te,null,ve(q(xe),f=>N((p(),k(d,{key:f.name,to:f.to,exact:f.exact,class:B(["sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-colors no-underline",{"bg-primary-light bg-opacity-10 text-primary":b(f.name),"text-gray-600 hover:bg-gray-50":!b(f.name)}])},{default:s(()=>[i("div",at,[f.name==="profile"&&q(a).currentUser&&S.value?(p(),k(G,{key:0,size:"20px"},{default:s(()=>[i("img",{src:_.value},null,8,nt)]),_:1})):(p(),k(R,{key:1,name:f.icon,size:"20px"},null,8,["name"])),f.name==="offers"&&w.value&&q(a).isAuthenticated?(p(),V("div",it)):A("",!0)]),i("span",ut,O(f.label),1)]),_:2},1032,["to","exact","class"])),[[Ie]])),128))]),q(a).isAuthenticated?(p(),V("div",ct,[i("div",dt,[l(G,{size:"32px"},{default:s(()=>[S.value?(p(),V("img",{key:0,src:_.value},null,8,ft)):(p(),V("img",{key:1,src:q(le)},null,8,ht))]),_:1}),i("div",mt,[i("div",vt,O(((x=q(a).currentUser)==null?void 0:x.name)||"User"),1),i("div",pt,O((L=q(a).currentUser)==null?void 0:L.email),1)])]),l(P,{flat:"",color:"primary",label:"Log out",class:"w-full mt-4 text-sm",onClick:$,"no-caps":""})])):A("",!0)])],2)],64)}}};var we=Ee(gt,[["__scopeId","data-v-61d65414"]]);async function yt(o={}){const e=fe(),u=he(),a=Oe();try{if(typeof a.clearAllFilters=="function"&&a.clearAllFilters(),typeof e.resetStore=="function")e.resetStore();else if(typeof e.clearStore=="function")e.clearStore();else{console.log("No reset method found on categoryStore, performing manual reset");try{e.categories=[],e.currentCategory=null,e.brands=[],e.colors=[],e.sizes={letter:[],number:[],waist:[],shoe:[]},e.isLoading=!1,e.error=null}catch(t){console.error("Error during manual reset:",t)}}typeof u.clearCache=="function"?u.clearCache():console.log("Product store does not have clearCache method, skipping"),await Promise.all([e.fetchCategories(!0),e.fetchAllBrands?e.fetchAllBrands(!0):Promise.resolve(),e.fetchAllColors?e.fetchAllColors(!0):Promise.resolve(),e.fetchLetterSizes?e.fetchLetterSizes(!0):Promise.resolve(),e.fetchNumberSizes?e.fetchNumberSizes(!0):Promise.resolve(),e.fetchWaistSizes?e.fetchWaistSizes(!0):Promise.resolve(),e.fetchShoeSizes?e.fetchShoeSizes(!0):Promise.resolve()]),u.fetchProducts&&await u.fetchProducts({forceRefresh:!0}),console.log("All caches refreshed successfully")}catch(t){throw console.error("Failed to refresh caches:",t),t}}async function _t(o={}){const e=fe(),u=he();try{return console.log("Starting direct cache refresh"),console.log("Clearing category store data"),e.$patch({categories:[],currentCategory:null,brands:[],colors:[],sizes:{letter:[],number:[],waist:[],shoe:[]},isLoading:!1,error:null}),console.log("Fetching fresh category data"),await e.fetchCategories(!0),u&&(console.log("Fetching fresh product data"),await u.fetchProducts({forceRefresh:!0})),console.log("Cache refresh completed successfully"),!0}catch(a){return console.error("Direct refresh failed:",a),!1}}const bt={class:"row q-col-gutter-sm"},xt={class:"col-12"},wt={class:"col-12 col-sm-6"},St={class:"col-12 col-sm-6"},zt={class:"row q-col-gutter-sm"},Ct={class:"col-12"},kt={class:"row q-col-gutter-sm"},Pt={class:"col-12"},$t={class:"text-body2"},Qt={class:"col-12"},Lt={class:"text-body2"},qt={class:"col-12"},Vt={class:"text-body2"},At={__name:"DevTools",setup(o){We();const e=fe(),u=he();de();const a=Q(!1),t=Q(!1),m=g(()=>!1),y=g(()=>({}).APP_VERSION||"Development"),w=g(()=>"production"),b=g(()=>({}).API_URL||"Unknown"),_=async()=>{try{t.value=!0,await _t({})||await yt({})}catch(c){console.error("Failed to refresh all data:",c)}finally{t.value=!1}},S=async()=>{try{typeof e.resetStore=="function"?e.resetStore():(e.categories=[],e.currentCategory=null,e.brands=[],e.colors=[],e.sizes={letter:[],number:[],waist:[],shoe:[]},e.isLoading=!1,e.error=null),await Promise.all([e.fetchCategories(!0),e.fetchAllBrands(!0),e.fetchAllColors(!0),e.fetchLetterSizes(!0),e.fetchNumberSizes(!0),e.fetchWaistSizes(!0),e.fetchShoeSizes(!0)]),console.log("Categories refreshed successfully!")}catch(c){console.error("Failed to refresh categories:",c)}},$=async()=>{try{u.clearCache(),await u.fetchProducts({forceRefresh:!0}),console.log("Products refreshed successfully!")}catch(c){console.error("Failed to refresh products:",c)}},h=()=>{try{localStorage.removeItem("user_token"),localStorage.removeItem("pinia-user"),console.log("User session cleared. Please log in again."),setTimeout(()=>{window.location.reload()},1500)}catch(c){console.error("Failed to clear user session:",c)}};return(c,d)=>(p(),V("div",null,[m.value?(p(),k(P,{key:0,round:"",color:"purple",icon:"developer_mode",class:"fixed bottom-[150px] right-4 z-50 opacity-70 hover:opacity-100 transition-opacity shadow-lg",size:"sm",onClick:d[0]||(d[0]=x=>a.value=!0)},{default:s(()=>[l(Y,null,{default:s(()=>d[2]||(d[2]=[H("Developer Tools")])),_:1})]),_:1})):A("",!0),l(De,{modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=x=>a.value=x),position:"right"},{default:s(()=>[l(W,{style:{"min-width":"350px"}},{default:s(()=>[l(D,{class:"bg-purple text-white"},{default:s(()=>d[3]||(d[3]=[i("div",{class:"text-h6"},"Developer Tools",-1)])),_:1}),l(ae),l(D,{class:"q-pa-none"},{default:s(()=>[l(Le,null,{default:s(()=>[l(re,{group:"dev-tools",icon:"cached",label:"Cache Management","header-class":"text-purple","expand-separator":"","default-opened":""},{default:s(()=>[l(W,null,{default:s(()=>[l(D,null,{default:s(()=>[d[4]||(d[4]=i("p",{class:"text-caption q-mb-sm"}," Use these tools to clear cached data and refresh from the server. This is useful after database migrations or when making changes to API responses. ",-1)),i("div",bt,[i("div",xt,[l(P,{label:"Refresh All Caches",icon:"refresh",color:"primary",class:"w-full",loading:t.value,onClick:_},null,8,["loading"])]),i("div",wt,[l(P,{label:"Categories",icon:"category",color:"purple",outline:"",class:"w-full",onClick:S})]),i("div",St,[l(P,{label:"Products",icon:"inventory_2",color:"purple",outline:"",class:"w-full",onClick:$})])])]),_:1})]),_:1})]),_:1}),l(re,{group:"dev-tools",icon:"account_circle",label:"User Session","header-class":"text-purple","expand-separator":""},{default:s(()=>[l(W,null,{default:s(()=>[l(D,null,{default:s(()=>[i("div",zt,[i("div",Ct,[l(P,{label:"Clear User Data",icon:"delete",color:"negative",outline:"",class:"w-full",onClick:h})])])]),_:1})]),_:1})]),_:1}),l(re,{group:"dev-tools",icon:"info",label:"App Information","header-class":"text-purple","expand-separator":""},{default:s(()=>[l(W,null,{default:s(()=>[l(D,null,{default:s(()=>[i("div",kt,[i("div",Pt,[d[5]||(d[5]=i("div",{class:"text-caption q-mb-xs"},"App Version",-1)),i("div",$t,O(y.value),1)]),i("div",Qt,[d[6]||(d[6]=i("div",{class:"text-caption q-mb-xs"},"Environment",-1)),i("div",Lt,O(w.value),1)]),i("div",qt,[d[7]||(d[7]=i("div",{class:"text-caption q-mb-xs"},"API URL",-1)),i("div",Vt,O(b.value),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(ae),l(je,{align:"right"},{default:s(()=>[N(l(P,{flat:"",label:"Close",color:"purple"},null,512),[[K]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const Tt={class:"flex items-center gap-3"},Ut={key:0,class:"absolute -top-1 -right-1 w-2 h-2 bg-negative rounded-full"},Rt={key:0,class:"px-4 py-2 border-t border-gray-100 bg-white"},Ft={key:0,class:"flex-grow mx-8 max-w-md"},Ht={class:"flex items-center gap-3"},Bt={key:0,class:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-negative rounded-full"},Et={key:2},It=["src"],Ot={key:3,class:"flex gap-2"},Dt={class:"pb-[70px] lg:pb-0 lg:pl-[220px] transition-all duration-300 pt-2"},io={__name:"MainLayout",setup(o){const e=$e(),u=Pe(),a=de(),t=Qe(),m=Q(""),y=Q(!1),w=Q(!1),b=Q(!1),_=["home","products","products-list"];g(()=>_.includes(u.name));const S=g(()=>{if(!a.currentUser||!a.currentUser.profile)return null;const f=a.currentUser.profile;if(f.profile_picture)return f.profile_picture;if(f.media&&f.media.length>0){const r=f.media.find(C=>C.is_primary)||f.media[0];return r.url||r.path}return null}),$=g(()=>!!S.value),h=()=>{e.push({name:"home"})},c=async()=>{try{await t.logout(),e.push("/login")}catch(f){console.error("Logout failed:",f)}},d=()=>{!m.value.trim()||(e.push({name:"products",query:{q:m.value.trim()}}),b.value=!1)},x=()=>{window.scrollTo({top:0,behavior:"smooth"})},L=()=>{y.value=window.scrollY>500};return ce(()=>{window.addEventListener("scroll",L)}),ke(()=>{window.removeEventListener("scroll",L)}),(f,r)=>{const C=se("router-link"),v=se("router-view");return p(),k(Xe,{view:"lHh lpR lFf",class:"bg-background-primary"},{default:s(()=>[l(_e,{bordered:"",class:B(["bg-white text-primary shadow-sm z-50",{hidden:f.$q.screen.gt.sm}]),style:{"backdrop-filter":"none",position:"sticky",top:"0"}},{default:s(()=>[l(ye,{class:"min-h-[56px] justify-between px-4"},{default:s(()=>[i("div",{class:"cursor-pointer",onClick:h},r[4]||(r[4]=[i("img",{src:ne,alt:"Spindle Logo",class:"h-7 object-contain"},null,-1)])),i("div",Tt,[q(a).isAuthenticated?(p(),k(P,{key:0,round:"",flat:"",color:"primary",size:"sm",class:"relative"},{default:s(()=>[l(R,{name:"notifications",size:"sm"}),w.value?(p(),V("div",Ut)):A("",!0)]),_:1})):A("",!0),q(a).isAuthenticated?(p(),k(P,{key:1,round:"",flat:"",color:"primary",size:"sm",to:"/messages"},{default:s(()=>[l(R,{name:"chat_bubble_outline",size:"sm"})]),_:1})):A("",!0)])]),_:1}),b.value?(p(),V("div",Rt,[l(ge,{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=n=>m.value=n),dense:"",filled:"",placeholder:"Search for clothes...",class:"bg-gray-50 rounded-full","bg-color":"grey-1",onKeyup:pe(d,["enter"])},{prepend:s(()=>[l(R,{name:"search"})]),append:s(()=>[m.value?(p(),k(P,{key:0,icon:"close",flat:"",round:"",dense:"",onClick:r[0]||(r[0]=n=>m.value="")})):A("",!0)]),_:1},8,["modelValue"])])):A("",!0)]),_:1},8,["class"]),l(_e,{bordered:"",class:"bg-white text-primary w-full shadow-sm hidden lg:block z-50",style:{"backdrop-filter":"none",position:"sticky",top:"0"}},{default:s(()=>[l(ye,{class:"min-h-[60px] justify-between container mx-auto px-4"},{default:s(()=>[i("div",{class:"cursor-pointer",onClick:h},r[5]||(r[5]=[i("img",{src:ne,alt:"Spindle Logo",class:"h-8 object-contain"},null,-1)])),q(u).name==="home"?(p(),V("div",Ft,[l(ge,{dense:"",outlined:"",modelValue:m.value,"onUpdate:modelValue":r[3]||(r[3]=n=>m.value=n),placeholder:"Search for clothes...",class:"bg-gray-50 rounded-full",onKeyup:pe(d,["enter"])},{prepend:s(()=>[l(R,{name:"search"})]),append:s(()=>[m.value?(p(),k(P,{key:0,icon:"close",flat:"",round:"",dense:"",onClick:r[2]||(r[2]=n=>m.value="")})):A("",!0)]),_:1},8,["modelValue"])])):A("",!0),i("div",Ht,[q(a).isAuthenticated?(p(),k(P,{key:0,round:"",flat:"",color:"primary",size:"sm",class:"relative"},{default:s(()=>[l(R,{name:"notifications"}),w.value?(p(),V("div",Bt)):A("",!0),l(Y,null,{default:s(()=>r[6]||(r[6]=[H("Notifications")])),_:1})]),_:1})):A("",!0),q(a).isAuthenticated?(p(),k(P,{key:1,round:"",flat:"",color:"primary",size:"sm",to:"/messages"},{default:s(()=>[l(R,{name:"chat_bubble_outline"}),l(Y,null,{default:s(()=>r[7]||(r[7]=[H("Messages")])),_:1})]),_:1})):A("",!0),l(P,{round:"",flat:"",color:"primary",size:"sm"},{default:s(()=>[l(R,{name:"help_outline"}),l(Y,null,{default:s(()=>r[8]||(r[8]=[H("Help & Info")])),_:1})]),_:1}),q(a).isAuthenticated?(p(),V("div",Et,[l(P,{round:"",flat:""},{default:s(()=>[l(G,{size:"30px"},{default:s(()=>[$.value?(p(),V("img",{key:0,src:S.value},null,8,It)):(p(),k(R,{key:1,name:"person",class:"text-gray-400"}))]),_:1}),l(Ne,{anchor:"bottom right",self:"top right",class:"bg-white rounded-lg shadow-lg"},{default:s(()=>[l(Le,{style:{"min-width":"200px"}},{default:s(()=>[N((p(),k(oe,{clickable:"",to:"/profile"},{default:s(()=>[l(E,{avatar:""},{default:s(()=>[l(R,{name:"person",color:"primary"})]),_:1}),l(E,null,{default:s(()=>r[9]||(r[9]=[H("Profile")])),_:1})]),_:1})),[[K]]),N((p(),k(oe,{clickable:"",to:"/settings"},{default:s(()=>[l(E,{avatar:""},{default:s(()=>[l(R,{name:"settings",color:"primary"})]),_:1}),l(E,null,{default:s(()=>r[10]||(r[10]=[H("Settings")])),_:1})]),_:1})),[[K]]),l(ae),N((p(),k(oe,{clickable:"",onClick:c},{default:s(()=>[l(E,{avatar:""},{default:s(()=>[l(R,{name:"logout",color:"negative"})]),_:1}),l(E,null,{default:s(()=>r[11]||(r[11]=[H("Logout")])),_:1})]),_:1})),[[K]])]),_:1})]),_:1})]),_:1})])):(p(),V("div",Ot,[l(C,{to:"/login"},{default:s(()=>[l(P,{outline:"",color:"primary",label:"Login",class:"text-sm","no-caps":""})]),_:1}),l(C,{to:"/register"},{default:s(()=>[l(P,{unelevated:"",color:"primary",label:"Sign Up",class:"text-sm","no-caps":""})]),_:1})]))])]),_:1})]),_:1}),i("div",Dt,[l(v,{class:"animate-fade-in"}),i("div",{class:B(["fixed bottom-[80px] right-[18px] z-50",{hidden:!y.value}])},[l(P,{round:"",color:"secondary",icon:"keyboard_arrow_up",onClick:x,class:"shadow-lg btn-hover-effect",size:"md"})],2)]),l(Ke,{bordered:"",class:"lg:hidden bg-white z-50 shadow-up"},{default:s(()=>[l(we)]),_:1}),l(we),l(At)]),_:1})}}};export{io as default};
