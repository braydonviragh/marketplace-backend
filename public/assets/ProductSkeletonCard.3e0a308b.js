import{I as S,u as m,J as c,K as k,_ as b,o as d,c as f,a as o,t as l,L as F,e as v,M as g,i as h,m as u,n as _,g as y,w as x,N as p,O as C}from"./index.fad208ab.js";import{Q as w}from"./QChip.208e8a8e.js";const j=S("favorites",{state:()=>({favorites:[],loading:!1,error:null}),getters:{getFavorites:e=>e.favorites,isFavorite:e=>s=>e.favorites.some(i=>i.product_id===s)},actions:{async fetchFavorites(){var s,i;if(!m().isAuthenticated)return[];try{this.loading=!0,this.error=null;const r=await c.get("/favorites");return this.favorites=r.data.data,this.favorites}catch(r){return console.error("Error fetching favorites:",r),this.error=((i=(s=r.response)==null?void 0:s.data)==null?void 0:i.message)||"Failed to load favorites",[]}finally{this.loading=!1}},async toggleFavorite(e){var r,t;const s=m(),{showAuthOverlay:i}=k();if(!s.isAuthenticated){i();return}try{if(this.loading=!0,this.error=null,this.isFavorite(e))await c.delete(`/favorites/${e}`),this.favorites=this.favorites.filter(a=>a.product_id!==e);else{const a=await c.post("/favorites",{product_id:e});this.favorites.push(a.data.data)}}catch(a){console.error("Error toggling favorite:",a),this.error=((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to update favorites"}finally{this.loading=!1}},addFavorite(e){this.isFavorite(e.product_id)||this.favorites.push(e)},removeFavorite(e){this.favorites=this.favorites.filter(s=>s.product_id!==e)},clearFavorites(){this.favorites=[]}}});const $=["src","alt"],z={class:"absolute bottom-2 left-2 bg-primary bg-opacity-70 text-white text-xs px-2 py-1 rounded-full"},W={class:"p-3 flex-grow flex flex-col"},B={class:"font-medium text-sm line-clamp-1 mb-1"},N={class:"text-xs text-gray-500 mb-2 flex items-center"},P={class:"line-clamp-1"},A={class:"flex gap-1 flex-wrap mt-auto"},V={__name:"ProductCardRow",props:{product:{type:Object,required:!0},isFavorite:{type:Boolean,default:!1},isAuthenticated:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!0},minWidth:{type:String,default:"170px"},maxWidth:{type:String,default:"170px"},imageHeight:{type:String,default:"170px"}},emits:["click","toggle-favorite","image-error"],setup(e,{emit:s}){const i=t=>{if(!t.media||t.media.length===0)return"https://via.placeholder.com/170x170?text=No+Image";const a=t.media.find(n=>n.is_primary)||t.media[0];return a.url||a.path},r=t=>t.location?t.location.city||t.location.formatted_address||"Location":t.city||"Location unavailable";return(t,a)=>(d(),f("div",{class:g(["product-card bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden flex flex-col",e.fixedWidth?`min-w-[${e.minWidth}] max-w-[${e.maxWidth}] flex-shrink-0`:"w-full"]),onClick:a[1]||(a[1]=n=>t.$emit("click"))},[o("div",{class:"relative w-full",style:_({height:e.imageHeight})},[o("img",{src:i(e.product),class:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",alt:e.product.name||e.product.title},null,8,$),o("div",z," $"+l(e.product.rental_price||e.product.price||"0.00")+" / day ",1),e.isAuthenticated?(d(),f("button",{key:0,class:"absolute top-2 right-2 w-8 h-8 flex items-center justify-center bg-white bg-opacity-70 rounded-full shadow-sm",onClick:a[0]||(a[0]=F(n=>t.$emit("toggle-favorite"),["stop"]))},[v(h,{name:e.isFavorite?"favorite":"favorite_border",class:g(e.isFavorite?"text-negative":"text-gray-700"),size:"sm"},null,8,["name","class"])])):u("",!0)],4),o("div",W,[o("h3",B,l(e.product.name||e.product.title),1),o("div",N,[v(h,{name:"location_on",size:"xs",class:"mr-1"}),o("span",P,l(r(e.product)),1)]),o("div",A,[e.product.category?(d(),y(w,{key:0,dense:"",size:"sm",outline:"",class:"text-xs text-primary"},{default:x(()=>[p(l(e.product.category.name),1)]),_:1})):u("",!0),e.product.size?(d(),y(w,{key:1,dense:"",size:"sm",outline:"",class:"text-xs text-primary"},{default:x(()=>[p(l(e.product.size.display_name||e.product.size.name),1)]),_:1})):u("",!0)])])],2))}};var E=b(V,[["__scopeId","data-v-592df903"]]);const H={class:"product-skeleton-card"},I={__name:"ProductSkeletonCard",props:{imageHeight:{type:String,default:"220px"},minWidth:{type:String,default:null},maxWidth:{type:String,default:null}},setup(e){return(s,i)=>(d(),f("div",H,[o("div",{class:"bg-gray-200 rounded-t-lg animate-pulse",style:_({height:e.imageHeight||"220px"})},null,4),i[0]||(i[0]=C('<div class="p-3" data-v-65c05710><div class="h-4 bg-gray-200 rounded w-3/4 mb-2 animate-pulse" data-v-65c05710></div><div class="h-3 bg-gray-200 rounded w-1/2 mb-3 animate-pulse" data-v-65c05710></div><div class="flex gap-1" data-v-65c05710><div class="h-5 bg-gray-200 rounded w-16 animate-pulse" data-v-65c05710></div><div class="h-5 bg-gray-200 rounded w-14 animate-pulse" data-v-65c05710></div></div></div>',1))]))}};var M=b(I,[["__scopeId","data-v-65c05710"]]);export{M as P,E as a,j as u};
