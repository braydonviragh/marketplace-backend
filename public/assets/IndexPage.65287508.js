import{Q as F}from"./QSkeleton.328d8280.js";import{r as w,u as I,_ as P,o as r,c as n,a as l,F as b,d as C,n as E,e as i,f as N,t as A,Q as V,g as B,h as x,i as J,j as R,k as T,l as D,m as L,w as k,p as W,q,s as H,v as U,C as G}from"./index.1c4d6210.js";import{Q as O}from"./QSeparator.56f3d040.js";import{Q as M}from"./QCardActions.d9fc1017.js";import{P as Y,u as X,a as Z}from"./ProductSkeletonCard.232e2c76.js";import"./QChip.b69f4eda.js";function K(){const s=w(null),p=w(null),a=w(!1),d=I();return{coordinates:s,error:p,isLoading:a,getCurrentPosition:async()=>{var g,y;a.value=!0,p.value=null;try{const f=await new Promise((o,v)=>{navigator.geolocation.getCurrentPosition(o,v,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})});return s.value={latitude:f.coords.latitude,longitude:f.coords.longitude},s.value}catch{const o=d.currentUser;return(g=o==null?void 0:o.profile)!=null&&g.postal_code?{postal_code:o.profile.postal_code}:(y=o==null?void 0:o.profile)!=null&&y.city?{city:o.profile.city}:(p.value="No location available",null)}finally{a.value=!1}}}}const ee={class:"product-skeleton-row"},te={class:"flex flex-nowrap overflow-x-auto gap-4 scrollbar-hide",style:{"min-width":"100%"}},oe={__name:"ProductSkeletonRow",props:{count:{type:Number,default:6},minWidth:{type:String,default:"170px"},maxWidth:{type:String,default:"170px"},imageHeight:{type:String,default:"170px"}},setup(s){return(p,a)=>(r(),n("div",ee,[l("div",te,[(r(!0),n(b,null,C(s.count,d=>(r(),n("div",{key:`skeleton-${d}`,class:"flex-shrink-0 overflow-hidden",style:E({minWidth:s.minWidth||"170px",maxWidth:s.maxWidth||"170px"})},[i(Y,{"image-height":s.imageHeight},null,8,["image-height"])],4))),128))])]))}};var Q=P(oe,[["__scopeId","data-v-159a0700"]]);const se={class:"category-row mb-8"},re={class:"flex justify-between items-center mb-4 px-4"},ae={class:"text-lg font-medium"},ie={key:0,class:"px-4"},le={key:1,class:"px-4"},ne={class:"bg-red-50 text-red-600 p-4 rounded-lg"},de={key:2,class:"relative"},ce={class:"flex flex-nowrap overflow-x-auto gap-4 py-2 px-4 scrollbar-hide pb-3",style:{"min-width":"100%"}},ue={key:3,class:"px-4 py-8 text-center text-gray-500"},pe={__name:"CategoryRow",props:{title:{type:String,required:!0},products:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["view-all"],setup(s,{emit:p}){const a=N(),d=I(),u=X(),g=o=>u.isFavorite(o.id),y=async o=>{try{if(!d.isAuthenticated){a.push("/login");return}await u.toggleFavorite(o.id)}catch(v){console.error("Failed to toggle favorite:",v)}},f=o=>{a.push({name:"product-details",params:{id:o.id}})};return(o,v)=>(r(),n("div",se,[l("div",re,[l("h2",ae,A(s.title),1),i(V,{flat:"",dense:"",color:"primary",label:"View All",class:"text-sm","no-caps":"","icon-right":"chevron_right",onClick:v[0]||(v[0]=m=>o.$emit("view-all"))})]),s.loading&&s.products.length===0?(r(),n("div",ie,[i(Q,{count:6,"min-width":"170px","max-width":"170px","image-height":"170px"})])):s.error?(r(),n("div",le,[l("div",ne,A(s.error),1)])):s.products.length>0?(r(),n("div",de,[l("div",ce,[(r(!0),n(b,null,C(s.products,m=>(r(),B(Z,{key:m.id,product:m,"is-favorite":g(m),"is-authenticated":x(d).isAuthenticated,"fixed-width":!0,"min-width":"170px","max-width":"170px","image-height":"170px",onClick:h=>f(m),onToggleFavorite:h=>y(m)},null,8,["product","is-favorite","is-authenticated","onClick","onToggleFavorite"]))),128))])])):(r(),n("div",ue," No products available in this category "))]))}};var _=P(pe,[["__scopeId","data-v-429c8b92"]]);const ge={class:"category-circle w-[70px] h-[70px] rounded-full p-[2px] cursor-pointer shadow-sm bg-white border border-gray-100"},me={class:"w-full h-full rounded-full overflow-hidden flex items-center justify-center bg-gray-50"},ye=["src","alt"],fe={class:"text-xs mt-2 font-medium truncate w-[70px] text-center"},ve={__name:"CategoryCircle",props:{category:{type:Object,required:!0}},emits:["click"],setup(s,{emit:p}){const a=d=>({Dresses:"mdi-human-female",Tops:"mdi-tshirt-crew",Handbags:"mdi-bag-personal",Accessories:"mdi-glasses",Activewear:"mdi-run-fast",Blazers:"mdi-human-male",Bodysuits:"mdi-human-female",Jeans:"mdi-jeans",Jewelry:"mdi-diamond-stone",Pants:"mdi-jeans",Jumpsuits:"mdi-human-handsdown",Shoes:"mdi-shoe-heel",Shorts:"mdi-jeans-short",Skirts:"mdi-human-female","Sweats & Hoodies":"mdi-face-man-profile","Sweaters & Knits":"mdi-scarf",Suits:"mdi-tuxedo",Other:"mdi-tshirt-crew-outline"})[d]||"mdi-tshirt-crew";return(d,u)=>(r(),n("div",{class:"flex flex-col items-center flex-shrink-0",onClick:u[0]||(u[0]=g=>d.$emit("click"))},[l("div",ge,[l("div",me,[s.category.image_url?(r(),n("img",{key:0,src:s.category.image_url,alt:s.category.name,class:"w-full h-full object-cover"},null,8,ye)):(r(),B(J,{key:1,name:a(s.category.name),class:"text-3xl text-primary"},null,8,["name"]))])]),l("span",fe,A(s.category.name),1)]))}};const he={class:"mb-8"},_e={class:"overflow-x-auto whitespace-nowrap scrollbar-hide"},xe={class:"inline-flex flex-nowrap gap-4 px-4",style:{"min-width":"max-content"}},we={__name:"CategorySlider",props:{categories:{type:Array,required:!0}},emits:["navigate"],setup(s,{emit:p}){return(a,d)=>(r(),n("div",he,[d[0]||(d[0]=l("div",{class:"px-4 mb-4"},[l("h2",{class:"text-xl font-semibold"},"Categories")],-1)),l("div",_e,[l("div",xe,[(r(!0),n(b,null,C(s.categories,u=>(r(),B(ve,{key:u.id,category:u,onClick:g=>a.$emit("navigate",u)},null,8,["category","onClick"]))),128))])])]))}};var $e=P(we,[["__scopeId","data-v-a07ac510"]]);const be={class:"pb-16"},Ce={key:0,class:"p-4 pt-[65px]"},Ae={class:"mb-6"},ke={class:"px-4 mb-4"},Se={class:"overflow-x-auto whitespace-nowrap scrollbar-hide"},Pe={class:"inline-flex flex-nowrap gap-4 px-4",style:{"min-width":"max-content"}},Be={class:"px-4 mb-4"},Fe={key:1,class:"fade-in"},Ve={class:"text-xl font-medium q-mb-md"},Ie={class:"text-lg font-medium text-primary q-mb-sm"},qe={class:"text-gray-700"},Ne={__name:"IndexPage",setup(s){const p=N(),a=R(),d=I(),u=T(),g=w(!0),y=w(!1),f=w({title:"",sections:[]}),o=w({dresses:{loading:!0,products:[]},topsAndBodysuits:{loading:!0,products:[]},bottomEssentials:{loading:!0,products:[]},professionalAttire:{loading:!0,products:[]},cozyAndCasual:{loading:!0,products:[]},accessoriesAndJewelry:{loading:!0,products:[]}}),v=c=>{p.push({name:"products",query:{filter:c.name.toLowerCase()}})},m=(c=null,e={})=>{const t={...e};c&&(Array.isArray(c)?t.categories=c.join(","):t.category=c),p.push({name:"products",query:t})},h=(c,e)=>{p.push({name:"products",query:{category_ids:c.join(","),section:e}})},$=async(c,e)=>{o.value[e].loading=!0;try{console.log(`Fetching products for row ${e} with category IDs: ${c}`);const t=await a.fetchProductsByCategoryIds(c);!t||t.length===0?console.log(`No products found for ${e} with categories: ${c}`):console.log(`Found ${t.length} products for ${e}`),o.value[e].products=t||[]}catch(t){console.error(`Failed to fetch products for ${e}:`,t),o.value[e].products=[]}finally{o.value[e].loading=!1}};return D(async()=>{try{await u.fetchCategories()}catch(t){console.error("Failed to fetch categories:",t)}const c=[$([1],"dresses"),$([2,7],"topsAndBodysuits"),$([8,10,12],"bottomEssentials"),$([6,16],"professionalAttire"),$([14,15],"cozyAndCasual"),$([4,9],"accessoriesAndJewelry")],e=[];e.push((async()=>{try{await a.fetchProducts({filter:"trending",per_page:15})}catch(t){console.error("Failed to fetch trending products:",t)}})()),e.push((async()=>{try{const{getCurrentPosition:t}=K(),S=await t();if(S){const{latitude:j,longitude:z}=S.coords;await a.fetchNearbyProducts({latitude:j,longitude:z,radius:50})}}catch(t){console.error("Failed to fetch nearby products:",t)}})()),d.isAuthenticated&&(e.push(a.fetchTailoredProducts()),e.push(a.fetchFavoriteProducts()));try{await Promise.allSettled(c),await Promise.allSettled(e)}catch(t){console.error("Error fetching data:",t)}finally{g.value=!1}}),(c,e)=>(r(),n("div",be,[g.value?(r(),n("div",Ce,[l("div",Ae,[l("div",ke,[i(F,{type:"text",width:"200px",class:"mb-2"})]),l("div",Se,[l("div",Pe,[(r(),n(b,null,C(6,t=>i(F,{type:"circle",size:"70px",class:"flex-shrink-0",key:`story-${t}`})),64))])])]),(r(),n(b,null,C(3,t=>l("div",{key:`section-${t}`,class:"mb-8"},[l("div",Be,[i(F,{type:"text",width:"200px"})]),i(Q,{count:5})])),64))])):(r(),n("div",Fe,[i($e,{categories:x(u).categories,onNavigate:v},null,8,["categories"]),i(_,{title:"Trending Now",products:x(a).trendingProducts,loading:x(a).isLoading,onViewAll:e[0]||(e[0]=t=>m())},null,8,["products","loading"]),i(_,{title:"Elegant Dresses",products:o.value.dresses.products,loading:o.value.dresses.loading,onViewAll:e[1]||(e[1]=t=>h([1],"Dresses"))},null,8,["products","loading"]),i(_,{title:"Tops & Bodysuits",products:o.value.topsAndBodysuits.products,loading:o.value.topsAndBodysuits.loading,onViewAll:e[2]||(e[2]=t=>h([2,7],"Tops & Bodysuits"))},null,8,["products","loading"]),i(_,{title:"Bottom Essentials: Pants, Jeans & Shorts",products:o.value.bottomEssentials.products,loading:o.value.bottomEssentials.loading,onViewAll:e[3]||(e[3]=t=>h([8,10,12],"Bottom Essentials"))},null,8,["products","loading"]),i(_,{title:"Professional Attire: Blazers & Suits",products:o.value.professionalAttire.products,loading:o.value.professionalAttire.loading,onViewAll:e[4]||(e[4]=t=>h([6,16],"Professional Attire"))},null,8,["products","loading"]),i(_,{title:"Cozy & Casual: Sweats & Knitwear",products:o.value.cozyAndCasual.products,loading:o.value.cozyAndCasual.loading,onViewAll:e[5]||(e[5]=t=>h([14,15],"Cozy & Casual"))},null,8,["products","loading"]),i(_,{title:"Stylish Accessories & Jewelry",products:o.value.accessoriesAndJewelry.products,loading:o.value.accessoriesAndJewelry.loading,onViewAll:e[6]||(e[6]=t=>h([4,9],"Accessories & Jewelry"))},null,8,["products","loading"]),x(a).nearbyProducts.length>0?(r(),B(_,{key:0,title:"Near You",products:x(a).nearbyProducts,loading:x(a).isLoadingNearby,error:x(a).locationError,onViewAll:e[7]||(e[7]=t=>m(null,{nearby:!0}))},null,8,["products","loading","error"])):L("",!0),i(U,{modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=t=>y.value=t),position:"bottom"},{default:k(()=>[i(W,{class:"rounded-t-lg"},{default:k(()=>[i(q,{class:"text-center"},{default:k(()=>[l("h2",Ve,A(f.value.title),1),i(V,{round:"",flat:"",color:"grey",icon:"close",class:"absolute top-2 right-2",onClick:e[8]||(e[8]=t=>y.value=!1)})]),_:1}),i(O),i(q,{class:"q-pa-md"},{default:k(()=>[(r(!0),n(b,null,C(f.value.sections,(t,S)=>(r(),n("div",{key:S,class:"q-mb-md"},[l("h3",Ie,A(t.title),1),l("p",qe,A(t.content),1)]))),128))]),_:1}),i(M,{align:"center",class:"q-pa-md"},{default:k(()=>[H(i(V,{label:"Got it",color:"primary",flat:""},null,512),[[G]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))]))}};var Te=P(Ne,[["__scopeId","data-v-7027fc70"]]);export{Te as default};
